# DB_練習問題3

---

## SQL3

---

### 事前準備

以下のSQLを実行してテーブルとデータを作成してください。
データベース名は「db_exam」を使用してください。

```sql
/* SQLスクリプト */

/* テーブル作成 */
CREATE TABLE smtable01 (
  id INTEGER PRIMARY KEY,
  name VARCHAR(64),
  department VARCHAR(64)
);

CREATE TABLE smtable02 (
  id INTEGER PRIMARY KEY,
  name VARCHAR(64),
  department VARCHAR(64)
);

/* データ登録 */
INSERT INTO smtable01 VALUES
(1104, '吉田', '営業部'),
(1305, '西川', '開発部'),
(1408, '佐々木', '開発部'),
(1502, '木村', '営業部'),
(1607, '大原', '総務部');

INSERT INTO smtable02 VALUES
(1103, '藤田', '営業部'),
(1315, '伊藤', '開発部'),
(1420, '近藤', '総務部'),
(1513, '佐藤', '開発部'),
(1618, '小川', '総務部');
```

---

以下の1~20のSQLを作成しなさい。

1. smtable01テーブルに(1615, 山田, 総務部)をINSERTするSQLを作成しなさい。

2. smtable01テーブルの情報を全件表示するSQLを作成しなさい。

3. smtable01テーブルの部門をすべて開発部に更新するSQLを作成しなさい。

4. smtable01テーブルの情報をすべて削除するSQLを作成しなさい。

5. smtable01テーブルに(1612, 小波, 総務部), (1610, 伊井田, 開発部), (1609, 田中, 営業部), (1622, 園田, 開発部)をまとめて挿入するSQLを作成しなさい。

6. smtable01テーブルの(1607, 大原, 総務部)レコードを(1607, 大原, 営業部)と変更するSQLを作成しなさい。
なお条件としてidを指定すること。

7. smtable01テーブルの中から名前に"木"が含まれているレコードを選択するSQLを作成しなさい。

8. smtable01テーブル内の部門を、大原の所属部門と同じ部署に更新するSQLを作成しなさい。
ただしUPDATE/SELECTを使用すること。

9. smtable01テーブルに、smtable02テーブルの全てのデータを挿入するSQLを作成しなさい。

10. smtable01テーブルのデータを、名前を昇順で並べたときの上から4件分のレコードを削除するSQL文を作成しなさい。
ただしORDER BY/LIMITを使用すること。

11. smtable01テーブルの中から、部門が開発部のレコードのうち、idが一番大きいレコードの情報を取得するSQLを作成しなさい。ただしLIMITを使用すること。

12. smtable01テーブルの中から、部門が開発部のレコードのうち、idが一番大きいレコードの情報を取得するSQLを作成しなさい。ただしLIMITは使用しないこと。

13. smtable01テーブルのレコードとsmtable02テーブルのレコードを同時に取得するSQLを作成しなさい。
なおidが昇順で並んでいること。

14. smtable01テーブルとsmtable02テーブルのレコードから部門が営業部のレコードを取得するSQLを作成しなさい。
なおidが昇順で並んでいること。

15. smtable01テーブルとsmtable02テーブルのレコード数の合計を表示するSQLを作成しなさい。

16. smtable01テーブルの全レコードを表示するSQLを作成しなさい。
ただし、部門列の表示として、「営業部」は「SLS」、「開発部」は「DVL」、「総務部」は「GEN」を代わりに表示しなさい。

17. 以下の処理を実行する一連のSQLを作成しなさい。
    1. トランザクション開始
    2. smtable01テーブルのID1408のレコードを削除
    3. smtable01テーブルを全件表示
    4. ロールバック
    5. smtable01テーブルを全件表示

18. 以下のdeptテーブルを作成し、データを挿入するSQLをそれぞれ作成しなさい。

【テーブル情報】

|列名|型|制約|
|:--|:--|:--|
|deptno|INT|主キー|
|dept_name|VARCHAR(50)||

【データ】

|deptno|dept_name|
|:--|:--|
|10|engineer|
|20|sales|

19. 以下のempテーブルを作成し、データを挿入するSQLをそれぞれ作成しなさい。

【テーブル情報】

|列名|型|制約|
|:--|:--|:--|
|empno|INT|主キー|
|emp_name|VARCHAR(50)|
|deptno|INT|deptテーブルのdeptno列を外部キー参照|

【データ】

|empno|emp_name|deptno|
|:--|:--|:--|
|1|alice|10|
|2|bob|10|
|3|chris|20|

20. deptテーブルとempテーブルを結合して以下の結果を取得するSQLを作成しなさい。

| empno | emp_name | dept_name
|:--|:--|:--|
| 1 | alice    | engineer|
| 2 | bob      | engineer|
| 3 | chris    | sales|
