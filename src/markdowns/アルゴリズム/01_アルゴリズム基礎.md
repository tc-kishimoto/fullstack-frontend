# アルゴリズム

---

## アルゴリズムとは

アルゴリズムとは「ある目的を達成するための手順」を指します。

「ある目的」とは実現できる何かである必要があり、アルゴリズムは「実現可能であるものを実現するための手順」ということになります。

---

## アルゴリズムの定義

アルゴリズムついては様々な考え方がありますが、以下のようなものである必要があります。

* 手順の内容が明確である
  * アルゴリズムの全ての手順は誰が見ても同じ動作ができるようになっています

* 手順が有限個である
  * アルゴリズムの手順は有限個であり、結果を伴って終了するようになっています

* 繰り返しの回数が有限である
  * アルゴリズムに含まれる繰り返しは有限回になっています

---

### アルゴリズムの例

アルゴリズムは日常生活でも数多くあります。


例えば

* 料理のレシピ
* 研修会場までの通勤

などが上げられます。

---

### アルゴリズムを学ぶ意味

なぜアルゴリズムを学ぶ必要があるのでしょうか。

プログラミングに必要な要素は

* 「プログラミング言語の知識」
* 「実現したい処理の手順を考える力」

です
この「実現したい処理の手順を考える力」こそ、アルゴリズムを考える力のことです。
従ってプログラミングを習得する上ではアルゴリズムを考える力が必須です。

---

### 効率の良いアルゴリズム

アルゴリズムを考えるうえで最も重要なことは、目的が達成できるか（実現したいことが実現できるか）どうかです。
しかし、実現したいことができればそれでいいわけではありません。
より効率の良い方法で実現できないか考えることが大事です。

---

## 練習問題

### トーナメントの試合数

テニスの大会を行います。
試合はシングルスのみで、参加者は100人。
トーナメント形式で大会を行う場合、全部で何試合行えば優勝者が決まるか？

![picture 1](/images/9f78a14df56fc199be7a286d66351541d9980068fc8de4fac3124fda304e4bac.png)  

---

### 解説

**回答1**  
トーナメントで試合を行う場合、第1試合が全て終わった段階で人数が半分になります。
第2試合でさらに半分、第3試合でさらに半分、…、最後の1人になるまでこれを繰り返します。
今回は100名の参加者がいますので、第1試合は半分の50試合、第2試合は25試合、端数が出るため、ちょっと複雑ですが、第3試合は12試合、…、決勝戦は1試合となります。
それらを計算すると以下のように99試合という結果が出ます。

50 + 25 + 12 + 6 + 3 + 2 + 1 = 99

---

**別解**
実は、もっと簡単な考え方があります
この形式で試合を行う場合、「1試合行うと1人の負けが決まる」という考え方です
「優勝者が決まる」は「優勝者以外の負けが決まる」と同じ意味ですから、100人でトーナメントを行う場合、99人の負けが決まればいいのです
そのため、99試合行えば、優勝者が決まるということになります

100 – 1 = 99

このように解答方法は何通りもあることがあります。
繰り返しになりますが、常に考え、より効率的に作業を進めるようにしていきましょう。

---

### 検索のアルゴリズム

コンピュータの内部ではよくの検索アルゴリズムが実行されます。
Googleの検索エンジンによるWebサイトの検索、ECサイトによる商品の検索、SNSによるユーザーの検索、ハッシュタグによる検索、など。
検索はどのようなアルゴリズムを使うかによって処理速度に大きな差が出ます。
同じデータの検索でもアルゴリズムによって1秒以内で結果が返ってくることもあれば30分以上結果が返ってこないこともあり得るのです。
処理の遅いプログラムを書いてユーザーからクレームをもらってしまわないために、より良いアルゴリズムを考えることが大事です。

---

## コンピュータにとってのアルゴリズム

コンピューターにとって、アルゴリズムは処理の手順を指します。
コンピューターはプログラマによって指示された処理の手順（アルゴリズム）に沿って「入力された情報」を処理し、「目的となる結果」を出力します。
このとき、コンピューターに指示を出すための言語がプログラミング言語（Java、C言語、C++等）となります。

![picture 2](/images/7b91643f4d48af015c741a3713b5d1633d1fd24f44ba14dd5aba94e0be4dea1f.png)  

---

### アルゴリズムで大事なこと

アルゴリズムでは大事な考え方が2つあります。

* 正確に
  * 目的を必ず達成できるような手順になっているか
* 効率良く
  * 目的を達成するまでにいかに手順を少なくするか

しっかりと考えアルゴリズムを作成することでコンピューターへの負担軽減に繋がっていきます。
これは複雑なアルゴリズムであればあるほど顕著に表れます。
また、運用や保守において複数のエンジニアがアルゴリズムを確認するとき、誰が見ても分かりやすいアルゴリズムを実現することがとても重要になってきます。

---

## アルゴリズムの要素とフローチャート

アルゴリズムを構成する要素は以下の三つしかありません。

* 順次
* 選択
* 反復

---

### 順次

![picture 3](/images/656004fb123f73a3756e571358ff9ce65ffee2337002c63290bc41f5e4328eed.png)  

---

### 選択

![picture 4](/images/d22f83d92ceab623715c33908f796b13d140ef279677337e06901b0cf783acdb.png)  

---

### 反復

![picture 5](/images/7ae06193a3f569a14ea2544cadf1d0c330996279c47a871f58f29bae63deb200.png)  

---

### アルゴリズムの要素

これら三つの要素の組み合わせでアルゴリズムを作成していきます。
しかし、アルゴリズムを言葉で表現することは難しく、多くのアルゴリズムは記号や矢印を用いて表現されています。
その一つがフローチャートになります。

---

### フローチャート

記号や矢印を用いてアルゴリズムを表現します。
フローチャートは別名として、流れ図や作業図とも呼ばれます。

![picture 6](/images/ef44ce22c5ca5ec6b52678834ebc5ec6a1632becf2b3620078f84eee005f8398.png)  

---

様々な書き方が存在しますが、以下のような記号を用いてアルゴリズムをわかり易く表現することができます。

![picture 7](/images/5e896a54da583eeaba815da6cb9b6682426f3eebf1f43135aba3234cc6f14500.png)  

---

## 順次

以下のフローチャートは入力された数値xとyを足して、出力するというフローチャートです。

![picture 8](/images/2f9c8da781c2671cd5ed06149873b5ee45a3b1f1d544f830cb2039af96107aff.png)  

①の「開始」は端子記号で処理の開始を表現しています。
②～⑤は処理記号で処理そのものを表現しています。
x、y、zは変数と呼ばれるもので、値を一時的に保管する箱のようなものです。
⑥の「終了」は端子記号で処理の終了を表現しています。

---

## 練習問題

### 三角形の面積

三角形の面積を算出するアルゴリズムを考え、フローチャートを作成しなさい。
底辺と高さは入力値とする。

---

### 解説

![picture 9](/images/f2670caefddb32524546ee2750b5f4b3c5f080fdc9b267d8b8e8be7dd8bcacb2.png)  

②、③で底辺wと高さhを入力します。
④で入力した値を基に三角形の面積を算出、sに保持します。
⑤でsの値を出力します。

---

## 選択

続いて、選択を含んだフローチャートを書いてみましょう。
以下は数値xとyの値を比較し、大きい方から小さい方を引いた結果を出力するフローチャートです。

![picture 10](/images/b45da970195688973f3944fa1e81f3d15c53749ba7463017b02f6f9cd1ed4c0c.png)  

---

選択の処理は判断記号を用います。
ここではxとyの値を比較しており、xの値がyの値よりも大きい場合はYESの方向へ、それ以外であればNOの方向へ進みます。
上から下、左から右に処理が進まない場合は矢印を書きましょう。
また、ほとんどの場合、YES、NOを書く場所は特に指定がありません。

---

### 選択（多方向分岐）

選択は必ずYES、NOの二択になるとは限りません。
入力した値がaならばapple、bならば banana、oならばorangeと出力するフローチャートを考えてみましょう。

条件分岐であっても選択であるため、判断記号を用います。
①でxの値についての判定を行います。それぞれxの値に応じて別々の処理へ進みます。

![picture 11](/images/7b846e8e978dbc0fdec9d6c27eacd3d4ba9cdf0f4c2b416495fb666ab351d3ba.png)  

---

## 練習問題

### 絶対値

数値xを入力し、絶対値yを出力するフローチャートを作成しなさい。
※絶対値とは、プラスならそのままの値、マイナスならマイナスをプラスに変換した値のことです。

---

### 解説

![picture 12](/images/ec404c60be1cfa270fcc4a3108f54423b0abf63ddaa01a0c76e5e4b0b4bc6270.png)  

③で入力値である数値xが0より大きい数であるか判定します。
判定結果がYESであればそのままyに保持し、判定結果がNOであれば-1をかけてyに保持します。
⑥でyの値を出力します。

---

## 反復

反復を含んだフローチャートを書いてみましょう。
以下はhelloを10回表示するフローチャートです。

![picture 13](/images/5a8e2745255a99d3026455d7d5d212bc99f35bbed294e7e6f314dd36c25a18a1.png)  

---

③が反復の開始、⑥が反復の終了です。③に書かれている条件に従って④、⑤を繰り返し行います。
順に処理を追ってみましょう。
②でiに1を保持します。
③に反復の終了条件を記載します。この条件に合致した場合に反復を終了します。
iが1の時、③の終了条件には合致しないため④へ処理が進みます。
④でhelloと表示した後、⑤でiを1から2に更新します。
⑤の処理が終わったら、⑥の反復の終了がありますので③へ処理が進みます。
iは現在2なので、再度④、⑤の処理が行われます 。
iが11になったとき、③の終了条件に合致するため、④、⑤の処理を行わず、⑦の終了へ進みます。

---

## 練習問題

### 自動販売機

150円のペットボトルを購入する。
この自動販売機は10円しか入れることができないものとする。
また、入金するごとに不足している金額を表示する。
この自動販売機でペットボトルを購入するフローチャートを作成しなさい。

---

### 解説

![picture 14](/images/c0d0e0ff54fa0efc6b33b41f629366daacda014d989b84b2af9cfa7c504b6ef1.png)  

②で入金額xの初期値を0とします。
③で入金額xと150を比較し、入金額xが150以上でない場合は④へ処理を進めます。
④で10円の入金を受け、入金額xの値に10加えた数値でxを更新します。
⑤で不足している金額を表示します。
⑥は反復の終了ですので③の判定に処理を進めます。
③の判定で入金額xが150になるまで反復し、終了となります。

---

## 反復（後判定）

反復では、処理の前に条件判定を行う前判定反復と処理の後に条件判定を行う後判定反復があります。
先ほどまでの反復は処理の前に条件判定を行っていたため、前判定反復となります。
では、後判定反復はどのように記載すればよいのでしょうか。

---

![picture 15](/images/dd108144f47c2478fc8a2e857bea6489412d9976ab63be9a496f5cee763ada80.png)  

後判定反復は上記のように記載します。
条件式の記載位置が反復の開始から反復の終了へ移動しています。
後判定反復を用いた場合、前判定反復と異なり必ず1回は処理が行われます。
条件判定が処理の後に来るため、必ず1回は実行されるのです。

---

## 練習問題

### 名前の入力

入力された名前を表示する
名前の入力前に「名前を入力してください。」のメッセージを表示する。
名前の入力は必須とし、何も入力されなかった場合は再度、「名前を入力してください。」のメッセージを表示する。
名前が入力された場合、入力された名前を表示する。
このフローチャートを作成しなさい。

---

## 解説

![picture 16](/images/71a8de6760a98cfd3fa522475b1c6c8b2db17251640ab54b601216aa998a0a20.png)  

---

後判定反復を使用します。
④で名前の入力を促すメッセージを表示します。
⑤で入力された名前をxに保持します。
⑥で入力された名前が””（空文字）かどうかの判定を行います。
!=は右辺と左辺が等しくないことを判定します。
=と記載すると右辺と左辺が等しいことを判定します。
⑥で””（空文字）だと判定された場合、④へ、””（空文字）ではないと判定された場合、⑦へ処理が進みます。
⑦入力された名前を表示します。
