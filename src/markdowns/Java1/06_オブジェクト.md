# オブジェクト

---

## オブジェクト指向概要

オブジェクト指向とはソフトウェア開発技術の1つです。
オブジェクト指向とは何かについて説明します。

オブジェクト指向とは、「データ」や「処理」を1つの「オブジェクト（モノ）」にまとめて部品として扱い、その部品を組み合わせてシステムを作っていく考え方のことをいいます。

![picture 1](/images/bf4e00c0969303fdf5ecfb2ae191a96bd173915e5a509ee0e0592fed62876288.png)  

---

部品を作成する時、「分類、管理がしやすいこと」「再利用しやすいこと」を前提に作成します。
そうすることで、「同じものを作ってしまった」「元々使える部品があったじゃないか」などの無駄を省くことができます。
それによって、開発工程の効率化を図ることができます。

オブジェクト指向という考え方が登場する以前から、「作ったプログラムを再利用する」という考え方はありました。
しかし「データ」と「処理」はバラバラに管理され、再利用しにくいものでした。

![picture 2](/images/688e012bd90609158792ef5e1d353df4a8314951efccaedc6c22827660d915ae.png)  

なお、オブジェクト指向では、オブジェクトが持っている（管理している）データを状態、オブジェクトが持っている（実行できる）処理を振る舞いと呼ぶこともあります。

---

![picture 4](/images/812126d0f0f0a049a68a8a8b476915634d00bc7ab779ea2a150fa7bd88014df8.png)  

オブジェクト指向の考え方が言語仕様として取り入れられている言語を「オブジェクト指向言語」と呼びます。
Javaもオブジェクト指向を取り入れていますので、オブジェクト指向言語です。

---

Javaでは何もないところからオブジェクトは生成できません。
オブジェクトがどのような状態や振る舞いを備えるのかといった「設計書」が必要です。
この設計書を基にオブジェクトが生成されます。
この設計書のことをクラス、部品のことをオブジェクトといいます。
また、オブジェクトのことをインスタンスと呼ぶこともあります。

![picture 5](/images/bc6bc873aded41f9486735c729576352efdc9236157e6613f6a7f93a47a16372.png)  

Javaではクラスを自分で作ることもできますが、小さなプログラムであれば用意されているクラスを利用するだけでも作成できます。
まずはクラスとオブジェクト（インスタンス）のイメージができるようになることが大事です。

---

## クラスとオブジェクト

オブジェクト指向で必要なクラスとオブジェクト（インスタンス）をたい焼きで例えます。
まずはたい焼きでイメージを掴んでいきます。

![picture 6](/images/441d17065209aa0f6e42498a43ababca1c1f0fce87996e5069de603688671f0a.png)  

---

たい焼きを焼くには、通常、「たい焼きの型」に生地などを流し入れて作っています。
また、1つの「たい焼きの型」があれば、同じ形のたい焼きをいくつも焼くことができます。
そして、この「たい焼きの型」があれば、「誰でも」「簡単に」焼くことができます。

この考えをJavaに当てはめていきます。
Javaでは「型はクラス」、「型を基に作られたたい焼きはオブジェクト（インスタンス）」と考えることができます。

![picture 7](/images/3736f9ac1e152e50e2762dd323a796187b4461920211d0dea42741cabdb95602.png)  

---

このように何かを作るための設計書や型のことを「クラス」、その設計書や型から作られたものを「オブジェクト（インスタンス）」と呼びます。

オブジェクトは状態（データ）と振る舞い（処理）をひとまとまりにしたものです。
Javaでは状態（データ）はフィールド、振る舞い（処理）はメソッドと呼びます。
オブジェクトはフィールドとメソッドをもった「モノ」です。

![picture 8](/images/45a8d93a08a835fad70adcc73948ec89ae8dd5a7eb2184cd12daac886f460fe6.png)  

* オブジェクト
  * 状態（データ）＝フィールド
  * 振る舞い（処理）＝メソッド

---

## オブジェクト
オブジェクトはフィールドとメソッド（状態と振る舞い）をひとまとまりにした「モノ」です。
そのオブジェクトが、Javaプログラムのどこで使われているのかを見ていきます。

---

以下のプログラムを確認してください。

jsp

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>オブジェクト</title>
</head>
<body>
<%
String s1 = "Hello";
String s2 = "World!!";

int len1 = s1.length();
out.println(len1);
out.println("<br>");

String up1 = s1.toUpperCase();
out.println(up1);
out.println("<br>");

int len2 = s2.length();
out.println(len2);
out.println("<br>");

String up2 = s2.toUpperCase();
out.println(up2);
out.println("<br>");
%>
</body>
</html>
```

---

java部分のみ抜粋

```java
String s1 = "Hello";
String s2 = "World!!";

int len1 = s1.length();
out.println(len1);

String up1 = s1.toUpperCase();
out.println(up1);

int len2 = s2.length();
out.println(len2);

String up2 = s2.toUpperCase();
out.println(up2);
```

結果

```text
5
HELLO
7
WORLD!!
```

---

先ほどのプログラムをイメージ図で確認します。

![picture 9](/images/9fc7cb0fe49f7875d33e7e5d667e7877094cdffe080b5a23d1b6f079cdd529d0.png)  

どちらもlengthやtoUpperCaseといった、同じメソッドを使っていますが（「メソッドを呼ぶ」といいます）、結果が異なっています。
lengthメソッドは、そのオブジェクトが保持している文字列の「文字数」を返します。
toUpperCaseメソッドは、そのオブジェクトが保持している文字列を「大文字に変換して」返します。

それぞれのオブジェクトは独立した状態を持っていました。
s1は「Hello」、s2は「World!!」をフィールドに持っています

状態によって振る舞いが変わり、「フィールドの値」によって「メソッドの結果」が変わりました。
s1のlengthメソッドを呼び出すと「Hello」の文字数が数えられ、s2のlengthメソッドを呼び出すと「World!!」の文字数が数えられました。

---

### まとめ

* オブジェクトはそれぞれ自分だけのフィールドを持っています
  * それぞれ異なる値を管理できます
* 同じクラスから生成されたオブジェクトは同じメソッドを持っています
  * 例ではs1もs2も同じメソッドを持っていました
  * どちらもStringクラスという同じクラスを基に生成されています
* オブジェクトを変数に代入する場合は、基本的にはクラスと同じ名前の型の変数に代入します
  * 文字列はStringクラスから生成されたオブジェクトなので、String型の変数に代入できます
* オブジェクトが持っているメソッドは、そのオブジェクトの持っているフィールドの値によって結果が変わることがあります

---

### メソッド呼び出し

先ほど確認したプログラムですが、オブジェクトが持っているメソッドを呼び出した部分を詳細に説明します。

```java
int len1 = s1.length();

String up1 = s1.toUpperCase();

int len2 = s2.length();

String up2 = s2.toUpperCase();
```

メソッド名の後に「()」がありますが、これは呼び出すメソッドに呼び出し元から引き渡す値を書く場所です。
この「引き渡す値」を引数と呼びます。
今回は()に何も書いていませんので、引数は何も渡していません（「引数なし」と呼んだりします）。
またメソッドが返してくる処理結果のことを、戻り値あるいは返り値と呼びます
サンプルプログラムでは戻り値を変数に代入しています。

---

**メソッド呼び出しの読み方**

```java
int len1 = s1.length()
```

この一文は、「s1さん、あなたの文字数を教えてください。引数は特にありません」「その結果（戻り値）で、int型の変数len1を初期化します」という解釈になります。
「.」は、日本語の「の」にあたります。

改めて、メソッド呼び出しを整理します。
s1やs2はString型の変数です。そして、lengthとtoUpperCaseはメソッドの名前です。
つまり、どちらも

```java
変数名.メソッド名()
```

という構文になっています。
また便宜的にこれを

```java
インスタンス名.メソッド名()
```

とみなす場合もあります。

この「インスタンス名.メソッド名()」という構文は使用頻度が高く、非常に重要です。

またメソッドの戻り値は変数に代入し、計算に使用したり、出力したり自由に使うことができます。

---

## 講義動画

[文字列](https://youtu.be/z_3rilUicwM)
