# 四則演算

---

## 演算子

四則演算とは算数や数学などで使う、以下の4つの演算のことです。

1. 足し算（加算）
2. 引き算（減算）
3. 掛け算（乗算）
4. 割り算（除算）

これらはそれぞれ、＋、ー、×、÷で表します。

---

プログラムの世界では少し異なり、足し算を ＋ , 引き算を － , 掛け算を * , 割り算を /

で表し、これらを演算子と呼びます。

- 足し算：+ → +
- 引き算：- → -
- 掛け算：× → *
- 割り算：÷ → /

---

プログラムの世界では四則演算の他に剰余の計算（余りの計算）があります。プログラムの世界では、剰余の計算を % を使って表します。

**3 % 2 = 1（3を2で割った余り = 1 が求められる）**

---

## 文字列の結合

＋ 演算子は算数の世界では「数値を足す」という意味があります。しかし、プログラムの世界では2つの意味があります。

**１つは「数値を足す」**

**もう一つは「文字列を結合する」**

---

任意の動的プロジェクトに以下のcslc.jspを作成し、実行してください。

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Calc</title>
</head>
<body>
<%
out.println(3 + 2);
out.println("<br>");
out.println("文字列を" + "結合する");
out.println("<br>");
out.println("文字列に数字を結合：" + 10);
out.println("<br>"); 
%>
</body>
</html>
```

---

以下のような結果となります。

```text
5
文字列を結合する
文字列に数字を結合：10
```

1つ目は数値の足し算、2つ目、3つ目は文字列の結合です。

文字列と数値を+演算子で演算する場合、文字列を結合する処理が行われます。

---

calc.jspのスクリプトレット（<% ～ %>）内に以下の内容を追加して、実行してください。

```java
out.println("3 + 2 = " + 3 + 2);
out.println("<br>");
```

以下のような結果となります。

```text
3 + 2 = 32
```

---

なぜ、このような結果になるか見ていきます。

これは処理の順序がポイントになります。

+演算子を含む四則演算の演算子はすべて、算数での計算順序と同じ順序で処理されていきます。

「System.out.println(“3 + 2 = ”+ 3 + 2);」という処理は、以下の順で演算されています。

1. " 3 + 2 = " + 3　の処理

文字列を結合する処理が行われ

```text
" 3 + 2 = 3"
```

となります。

2. " 3 + 2 = 3" + 2　の処理

文字列を結合する処理が行われ

```text
"3 + 2 = 32"
```

となります。

---

3 + 2から計算させたい場合は次のように行います。

calc.jspのスクリプトレット（<% ～ %>）内に以下の内容を追加して、実行してください。

```java
out.println("3 + 2 = " + (3 + 2));
out.println("<br>");
```

以下のような結果となります。

```text
3 + 2 = 5
```

このように、算数と同じで括弧を使うと先に処理させたい場所を指示できます。

---

calc.jspのスクリプトレット(<% ～ %>)内に以下の内容を追加して、 他の演算子の処理の結果も確認してください。

```java
out.println("3 + 2 = " + (3 + 2));
out.println("<br>");
out.println("3 - 2 = " + (3 - 2));
out.println("<br>");
out.println("3 * 2 = " + (3 * 2));
out.println("<br>");
out.println("4 / 2 = " + (4 / 2));
out.println("<br>");
out.println("5 % 2 = " + (5 % 2));
```

結果

```text
3 + 2 = 5 
3 - 2 = 1 
3 * 2 = 6 
4 / 2 = 2 
5 % 2 = 1
```

---

## 数値の上限と下限

calc.jspのスクリプトレット（<% ～ %>）内に以下の内容を追加して、実行してください。

```java
out.println(2000000000 + 2000000000);
out.println("<br>");
out.println(-2000000000 - 2000000000);
out.println("<br>");
```

結果

```text
-294967296
294967296
```

想定した結果にはなっていません。

---

実はJavaの世界では数値に上限、下限があります。今までのように数値の計算をした場合、-2147483648～2147483647の間しか計算できません。

2000000000 + 2000000000のように、この範囲を超える結果を出そうとすると間違った値になってしまいます。これをオーバーフローと言います。

この範囲を超えるような計算をさせるには次のように行います。

calc.jspのスクリプトレット（<% ～ %>）内に以下の内容を追加して、実行してください。

```java
out.println(2000000000L + 2000000000L);
out.println("<br>");
out.println(-2000000000L - 2000000000L);
```

結果

```text
4000000000
-4000000000
```

Lをつけることでオーバーフローを防ぐことができます。
2000000000L + 2000000000のように、片方だけにLを付けても同じような結果が得られます。詳細については、変数の章で詳しく説明します。

---

## 講義動画

[四則演算](https://youtu.be/mPcwmegqtZc)
