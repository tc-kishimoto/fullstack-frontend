# Java 演習問題9

---

## 対象となる単元

* 抽象クラスとインターフェース
* 例外

---

## 基本

演習問題8(基本)で作成したゲームアプリ実行ページを、ゲーム以外のアプリも実行できるように改修します。

以降の説明、配布されたファイルを確認し、必要な処理を実装してください。

※adv/lesson4-basicブランチにチェックアウトし、演習問題3(基本)で実装したブランチをマージしてください。

[リポジトリ](https://github.com/tc-kishimoto/java-advanced-practice-lesson/tree/adv/lesson4-basic)

### 変更点概要

"トランプ"、"ダーツ"、"時計"いずれかのアプリを選べるようにします。

(その他を選んだ時は、アプリの実行に失敗する。)  
![image](https://user-images.githubusercontent.com/88996090/149872685-a437e082-4b89-4d62-9a8c-87e54d91c538.png)  

下記のようにインターフェース、抽象クラス、クラスを作成します。

![image](https://user-images.githubusercontent.com/88996090/149874596-435eb5f0-d85a-49c1-b092-a1253f525716.png)

### アプリの実行結果表示

* "トランプ"を選んだ場合　　
「〇〇さんとトランプでゲームを開始します。ババ抜きを行います。」と表示する。

(〇〇は入力したユーザ名)

* "ダーツ"を選んだ場合  ｜
「〇〇さんとダーツでゲームを開始します。10回投げて合計点を競います。」と表示する。

* "時計"を選んだ場合  
「〇〇さん、こんにちは。現在はyyyy/MM/dd hh:mm:ssです。」と表示する。

(yyy/MM/dd hh:mm:ssは、現在の日時分秒)  
![image](https://user-images.githubusercontent.com/88996090/149873017-57e9c9fa-0a89-4a04-8233-7a04e44cbf06.png)

* "その他"を選んだ場合  
「アプリの実行に失敗しました。」と表示する。

* 初期状態、およびユーザ名未入力の場合  
実行結果を表示しない。

### Appインターフェース(実装済み)

|インターフェース|説明|
|---------------|----|
|App(パッケージ名は"app")|アプリクラスに共通するメソッドを定義するためのインターフェース|

<抽象クラス(1つ)>

|戻り値|引数|メソッド名|説明|
|------|----|--------|-----|
|String|String|start|アプリを開始するメソッド|

### ClockAppクラス(実装済み)

|クラス名|実装するインターフェース|説明|
|-------|------------------------|----|
|ClockApp(パッケージ名は"app")|App|時計アプリを表すクラスbr>Appインターフェースを実装する|

<フィールド>  
なし

<メソッド(1つ)>

|戻り値|引数|メソッド名|処理|
|------|----|--------|-----|
|String|String|start|Appインターフェースのstartメソッドをオーバーライド。<br>“○○さん、こんにちは。現在はyyyy/MM/dd hh:mm:ssです。”<br>という文字列を返却する。<br>○○は引数の値yyyy/MM/dd hh:mm:ssは現在日時|

### GameApp抽象クラス

下記に従い、GameApp抽象クラスを作成してください。

|クラス名|実装するインターフェース|説明|
|-------|-----------------------|----|
|GameApp(パッケージ名は"app")|App|ゲーム関連のアプリに共通するフィールド、メソッドを定義するための抽象クラス<br>Appインターフェースを実装する|

<フィールド(1つ)>  

|フィールド名|型|説明|
|------------|--|----|
|item|String|ゲームに使用する道具名を表す文字列|

<コンストラクタ(2つ)>

|引数|処理|
|----|----|
|なし|何もしない<br>(引数なしのコンストラクタを定義するだけ)|
|String|引数の値をitemフィールドへ代入する|

<抽象メソッド(1つ)>

|戻り値|引数|メソッド名|処理|
|------|----|--------|-----|
|String|なし|play|ゲーム関連の各アプリ固有の文字列を作成するためのメソッド|

<メソッド(1つ)>

|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|String|start|“〇〇さんと××でゲームを開始します”という文字列に、<br>play()メソッドの戻り値を連結した文字列を返却する。<br>○○は引数の値<br>××はitemフィールドの値|

### CardGameAppクラス

下記に従い、CardGameAppクラスを作成してください。

|クラス名|親クラス|説明|
|-------|--------|----|
|CardGameApp(パッケージ名は"app")|GameApp|カードゲームアプリを表すクラス。GameApp抽象クラスを継承する|

<フィールド>  
なし

<コンストラクタ(2つ)>

|引数|処理|
|----|----|
|なし|親クラスの引数無しコンストラクタを呼ぶ|
|String|親クラスの引数付きコンストラクタを呼ぶ|

<メソッド(1つ)>  

|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|なし|play|親クラスのplayメソッドをオーバーライド。<br>“ババ抜きを行います。”という文字列を返却する。|

### DartsGameAppクラス

下記に従い、DartsGameAppクラスを作成してください。

|クラス名|親クラス|説明|
|-------|--------|----|
|DartsGameApp(パッケージ名は"app")|GameApp|ダーツゲームアプリを表すクラス<br>GameApp抽象クラスを継承する|

<フィールド>  
なし

<コンストラクタ(2つ)>  
|引数|処理|
|----|----|
|なし|親クラスの引数無しコンストラクタを呼ぶ|
|String|親クラスの引数付きコンストラクタを呼ぶ|

<メソッド(1つ)>
|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|なし|play|親クラスのplayメソッドをオーバーライド。<br>“10回投げて合計点を競います。”という文字列を返却する。|

### 補足

* appStart.jsp  
アプリを選択するためのラジオボタンを追加してください。
* StartAppServlet.java  
配布されたファイルに対し、必要な処理を実装してください。

プログラム完成後、作成したファイルをプッシュし、URLを講師に伝えてください。

---

## 発展

テキストファイルを取り込むページを作成します。

配布されたファイルを確認し、必要な処理の実装およびファイルを作成してください。

※adv/lesson4-devブランチにチェックアウトし、その中の以下のファイルを使用します。

[リポジトリ](https://github.com/tc-kishimoto/java-advanced-practice-lesson/tree/adv/lesson4-dev)

* import.jsp ... 取込画面(実装済み)
* result.jsp ... 結果画面(実装済み)
* importServlet.java ... import.jspから遷移し、ファイルの取込処理、次画面への遷移などの処理を行う
* animal.java ... 登録画面で入力した値(名前など)を保持するためのクラス(Cat、Rabbitクラス)の親クラス(実装済み)

### 概要

|![sample image](https://user-images.githubusercontent.com/88996090/149885967-5df05a4e-c22d-4d32-beee-3455ce0eca2e.png)|
|:-:|

|![sample image](https://user-images.githubusercontent.com/88996090/149886038-52fb2028-3764-4350-b5b9-13604c6acd54.png)|
|:-:|

|![sample image](https://user-images.githubusercontent.com/88996090/149886146-95202b36-2fa6-444c-bc82-0d2b3eb14302.png)|
|:-:|

### 取り込むファイルについて

取り込みを行うファイルは下記とします。

ファイルの場所：「c:\work」  
ファイル名：「cat.txt」「rabbit.txt」
※adv/lesson4-devの「src/main/webapp/text」内の取込用ファイルを「c:\work」にコピーまたは移動して使用してください。

※自身でファイルを作成する場合は、ファイルの文字コードは必ず「UTF-8」にしてください。

取り込むファイル内の情報は下記とします。

1行目：「名前」  
2行目：「年齢」  

また、ファイルの内容は下記の前提とします。

* 2行目は0以上の数値
* 必ず2行の内容が入っているものとし、0行や3行以上は考慮しない
* ファイルの文字コードは「UTF-8」とする。(今回は「UTF-8」を前提としているので、他の文字コードだと読み込みに失敗する)

### 実行結果表示

取込処理後、下記のようなメッセージを表示します。
![image](https://user-images.githubusercontent.com/88996090/149887833-b2bf6d7e-f94e-4939-aa82-2dee714303b0.png)

* 取り込んだ値(名前)などは、オブジェクトでまとめて管理します
* 選択したデータによって、下記のクラスを元にオブジェクトを作成します
  * ネコ ... Catクラス
  * ウサギ ... Rabbitクラス
* CatクラスとRabbitクラスはAnimalクラス(抽象クラス)を継承した子クラスとします。

![image](https://user-images.githubusercontent.com/88996090/149888131-a628deeb-82ea-432c-a5f8-31d1cc2cd51b.png)

### Animalクラス

登録画面で入力した値(名前など)を保持する(Cat、Rabbitクラス)の親クラスです。

このクラスは抽象クラスです。

|フィールド|型|説明|
|---------|--|----|
|name|String|名前を保持する|
|age|int|年齢を保持する|

<コンストラクタ(2つ)>

|引数|処理|
|----|----|
|なし|引数なし|
|String, int|フィールドに引数の値を初期値としてセットする|

<メソッド(1つ)>

|戻り値|引数|メソッド名|処理|
|-----|----|----------|----|
|String|なし|introduce|動物の情報を返却する。<br>"名前は〇〇です。年齢は△△です。××”という文字列を返却する。<br>○○はnameフィールドの値<br>△△はageフィールドの値<br>××はintroduceAgeメソッドの戻り値|

<抽象メソッド(2つ)>

|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|なし|introduceAge|年齢についての説明用の文字列を返却する|
|String|なし|getFilePath|読み込むファイルのパスを返却する|

### Catクラス

下記に従い、クラスを作成してください。
|クラス名|親クラス|説明|
|:--:|:--:|:--:|
|Cat|Animal|Animalクラスを継承する|

<フィールド>  
Catクラス個別のフィールドは定義しない  

<コンストラクタ(2つ)>

|引数|処理|
|----|----|
|なし|処理なし|
|String、int|親クラスのコンストラクタを呼ぶことで、フィールドに引数の値を初期値としてセットする|

<メソッド(2つ)>

|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|なし|introduceAge|親クラスのメソッドをオーバーライド。必要な文字列を返却する。|
|String|なし|getFilePath|親クラスのメソッドをオーバーライド。必要な文字列を返却する。|

### Rabbitクラス

下記に従い、クラスを作成してください。

|クラス名|親クラス|説明|
|:--:|:--:|:--:|
|Rabbit|Animal|Animalクラスを継承する|

<フィールド>  
Rabbitクラス個別のフィールドは定義しない  

<コンストラクタ(2つ)>

|引数|処理|
|----|----|
|なし|処理なし|
|String、int|親クラスのコンストラクタを呼ぶことで、フィールドに引数の値を初期値としてセットする|

<メソッド(2つ)>

|戻り値|引数|メソッド名|処理|
|------|----|---------|----|
|String|なし|introduceAge|親クラスのメソッドをオーバーライド。必要な文字列を返却する。|
|String|なし|getFilePath|親クラスのメソッドをオーバーライド。必要な文字列を返却する。|

### 補足

* Cat.java  
新たにファイルを作成し、必要な処理を実装してください。
* Rabbit.java  
新たにファイルを作成し、必要な処理を実装してください。
* importServlet.java  
配布されたファイルを元に、必要な処理を実装してください。

(ファイルの読み込みの処理は実装済みです)

プログラム完成後、作成したファイルをプッシュし、URLを講師に伝えてください。
