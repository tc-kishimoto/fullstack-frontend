# フレームワーク概要

---

## 概要

フレームワークの概要を学びます。
フレームワークが持っている機能について学びます。
よく使われているフレームワークの一部を紹介します。

---

### フレームワークとは

枠組み・骨組みという意味。
フレームワークは例えば、PDCAサイクル、ロジックツリーなどです。
これらは思考の枠組みという意味でのフレームワークです。
フレームワークという言葉は、プログラミングの世界に限らず、経営やマーケティングなど、様々な分野で使われる言葉です。

ではプログラミングの世界におけるフレームワークとは何でしょうか。
ざっくりいえばプログラムの半完成品のことです。
多くのシステムで使用する共通部分があらかじめ作られており、残りの部分を決められた枠組みに沿って開発することで、開発効率を上げるための技術のことです。

---

## フレームワークのメリット

### 開発効率が上がる

フレームワークを使うと、フレームワークで自動的に処理されている部分は記述する必要がなくなります。
フレームワークで用意されたライブラリを使うことで、少ないコード量で処理ができるようになります。
結果、書くべきコード量が減るので開発効率が上がります。

### 品質を統一しやすい

フレームワークではフレームワークで定められたルールに従って作る必要があるので、コーディング規約が統一しやすくなります。
結果として、コードの書き方の自由度は減るが、コーディング規約が決めやすく、その分品質が統一しやすくなるメリットがあります。

---

## フレームワークのデメリット

### 学習コストがかかる

そのフレームワーク独自の書き方、設定、関数などを多く覚える必要があります。
初めてフレームワークを使う場合は学習に時間がかかり、短期的に見れば開発効率は落ちる傾向にあります。
ある程度使い方を覚えてきたところで初めて効果を発揮するのがフレームワークの特徴です。

### 自由度が下がる

ルールに縛られたコーディングになるため、コーディングの自由度は下がります。
コードの書き方がある程度決まったものになるため、経験の少ない人でも品質を保ちやすいというメリットもありますが、フレームワークを使ったことによってどうしてもできないような処理が出てくる可能性もでてきます。

---

### 情報量が少ない

フレームワークはプログラミング言語に比べると利用人口が減るので、その分情報量が少なくなります
ただし、これはフレームワークの種類にかなり依存します。
多くの人が利用するメジャーなフレームワークであればドキュメントも充実しています。
新しいフレームワーク、使用人数の少ないフレームワークほど情報量が少なくなります。

---

## フレームワークの機能

ここでは多くのフレームワークで採用されている汎用的な機能について紹介します。
フレームワークによって使い方や細かな仕様は異なりますが、フレームワークが一般にどのような機能を備えているかを知っておくことで、使ったことのないフレームワークでも短い期間で理解することができるようになります。

---

### 豊富なライブラリ

多くのプログラミング言語ではあらかじめ標準ライブラリが用意されていますが、フレームワークでは各フレームワークが独自のライブラリを用意しています。
それらを活用することで、プログラミング言語の標準ライブラリを用いるよりも簡潔なコードで複雑な処理が実行できるようになります。

---

### URLマッピング(ルーティング)

多くのWeb系のフレームワークに供えられた機能です。
Web系のフレームワークでは、リクエストが投げられ時、URLによってどのクラスのどのメソッドが呼ばれるかを紐付けする機能があります。
設定方法はフレームワークによって異なり、アノテーション、設定ファイル、クラスやメソッドの命名規則で決まるものなどがあります。
URLマッピングの機能を使うことで、URLからファイルの拡張子を消すことができるようになります。
また、メソッド単位でマッピングすることにより全体のファイル数を減らして管理コストを下げることが可能になります。

---

### DI (Dependency Injection)

DIは、直訳すると依存性の注入と呼ばれ、フレームワークが自動的にクラスのインスタンスを作成し、変数の中に格納してくれる機能のことです。
DIを使うとソースコード上から「new」というキーワードをなくすことができ、オブジェクト同士の依存関係を疎結合に保つことが可能になります。

---

### AOP(Aspect Oriented Programming)

AOPはアスペクト指向プログラミングの略です。
例外処理（try~catch）、ログ出力、トランザクションなど、オブジェクト指向を活用しても共通化できないような処理を自動的に呼び出すことができる機能。
Javaのフレームワークでよく使われる。

---

### DB接続の自動化

DBへの接続の処理はDBを使うシステムであれば確実に行う処理です。
接続方法はどのシステムでも共通なので、フレームワークが事前に用意していて、自動で行われるものがほとんどです。
多くのフレームワークでは、DB接続の情報を記載するための設定ファイルが用意されており、設定ファイルに接続情報を書くだけで接続ができるようになります。

### クエリビルダ

多くのフレームワークではDBアクセス関連のライブラリが用意されています。
その中の一つで近年のWeb系のフレームワークでよく見られるの機能の一つがクエリビルダです。
クエリビルダという仕組みを使うことで、SQL文を直接書かなくても、プログラムから動的にSQL文を生成することが可能になります。

クエリビルダのイメージ

```text
db.select('*').from('users').where('id' => '1');
```

---

### ファイルの自動生成

DBアクセスの処理を作成する場合、テーブルに合わせてDaoやEntityを作成するのが一般的です。
フレームワークによってはEntityからテーブルを、あるいはテーブルからEntityを自動で生成する仕組みがあるものもあります。
他にも、設定ファイルやコマンドのパラメータからプログラムのひな型を自動生成するものもあります。

---

### バリデーション

バリデーションは、入力値の妥当性チェックのことです。
外部からの入力を受け付けるシステムの場合、不正な値が入力されないように入力チェックの処理を実装する必要があります。
バリデーションの機能があると、if文などを使って入力チェックをプログラムで細かく処理を書かなくても、設定だけである程度自動的に妥当性チェックを行ってくれます。
フレームワークによって、アノテーションを使って制御する方法、設定ファイルを使って制御する方法などがあります。

---

### メッセージリソース

メッセージリソースは、画面に表示するような文言を専用のファイルで管理する仕組みです。
システムのユーザーが多国籍となる場合、外国語対応をする必要が出てくる場合があります。
この場合、言語ごとにメッセージリソースファイルを用意しておくことで、言語の切り替えが用意にできるようになります。

---

## フレームワークの紹介

フレームワークは一つのプログラミング言語においても複数の種類があります。
ここでは有名どころのフレームワークをいくつか紹介します。

---

### Spring Framework(Spring Boot)

現在Javaで最もメジャーなフレームワーク。
Spring Bootは、Spring FrameworkをベースにWebアプリ開発に特化したフレームワーク。

https://spring.io/projects/spring-framework

---

### Laravel

現在PHPで最も人気なフレームワーク。
豊富な機能を備えており、大規模開発でも使用される。

http://laravel.jp/

---

### CakePHP

Laravelの前によく使われていたPHPのフレームワーク。
使うとパティシエになれる。

https://cakephp.org/jp

---

### Ruby on Rails

RubyによるWebアプリケーション開発用のフレームワーク。
現在主流なWeb系のフレームワークに大きな影響を与えており、Spring BootやLaravelもRailsの思想を受け継いでいると言われている。

https://railstutorial.jp/

---

### sinatra

Rubyの軽量フレームワーク。

http://sinatrarb.com/

---

### Django

PythonのWebアプリケーション開発用フレームワーク
ジャンゴと読みます。

https://docs.djangoproject.com/ja/3.1/

---

### jQuery

JavaScriptのフレームワーク。
（ライブラリと呼ばれることも多いが、人によって認識が異なる。）
\$マークを使った記法を使って、通常のJavaScriptよりも短い記述でJavaScriptの処理を定義することができる。

https://jquery.com

---

### Vue.js

JavaScriptのフレームワーク。
小規模なWebアプリケーションでよく使用される。

https://jp.vuejs.org/index.html

---

### React

JavaScriptのフレームワーク。
近年急激に利用者が増えている。

https://ja.reactjs.org/

---

### Bootstrap

CSSのフレームワーク。
あらかじめいい感じのレイアウトが多数定義されており、classの属性値を指定するだけでリッチなレイアウトを表現することができる。

https://getbootstrap.jp/

---

## フレームワークの学び方

ここで紹介したフレームワークは一部です。
フレームワークは一つのプログラミング言語でも多くの種類が存在するため、その分１つ１つの利用人口は言語と比べても少なく、ネットで検索しても欲しい情報が見つからない場合も少なくありません。
基本的には公式サイトのドキュメントが充実しているので、困ったことがあれば公式のドキュメントを積極的に活用するようにしましょう。

---

フレームワークを作る時には以下のような技術が使われています。

* デザインパターン
* リフレクション
* メタプログラミング

などなど

特定のフレームワークでの書き方を覚えても、他のフレームワークでは使えないので汎用性はありません。
しかし、フレームワークの裏側の仕組みを知ることができれば様々なフレームワークで応用が効きます。興味があればフレームワークの中で使われている技術についても学んでみてください。

---

## まとめ

* フレームワークはプログラムの半完成品で、開発効率を上げるための技術。
* フレームワークでは開発におけるルールを覚える必要があるため、学習コストがかかるが、慣れてくると開発効率が大幅に上がる。
* フレームワークは多くの種類があるが、提供している機能についてはある程度共通している。
* フレームワークの中の仕組みを知ることで、汎用的なスキルが身に付く。
* フレームワークを使った開発では基本的に公式サイトを参照する。
