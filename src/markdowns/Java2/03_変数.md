# 変数

---

以降はJavaファイルを作成しながらプログラムを確認しますが、jshellを使って処理の部分を確かめてもかまいません。
やりやすい方法でプログラムを実行しながら確認してください。

変数とはデータを保存しておく入れ物のことです。
値にラベルをつけておくものと説明されることもあります。
どちらの認識でも構いません。
自分がイメージしやすい方で理解してください。

構文

```java
型 変数名;  // 宣言
変数 = 値;  // 代入
型 変数 = 値; // 初期化
```

型とは、データの種類を表すものです。
Java以外のプログラミング言語では、変数を使用する際に型を指定する必要のないものもありますが、Javaの場合、変数を利用する際は必ず型を指定してあげる必要があります。
Javaは型に厳格なプログラミング言語であるという認識を持っておきましょう。

Main.java

```java
package app;

public class Main {
    public static void main(String[] args) {
        // この場合はintが型でnが変数名
        int n;  // 宣言
        n = 10; // 代入
        // 変数を出力
        System.out.println(n); // 10

        // 初期化
        int m = 10;
        System.out.println(m); // 10

        // 再代入
        n = 20;
        System.out.println(n); // 20

        // 以下はコンパイルエラー
        // 同じ名前の変数を2度宣言することはできない
        // int n;

        // 以下はコンパイルエラー
        // 値を代入せずに使用することはできない
        int num;
        // System.out.println(num);
    }
}
```

結果

```text
10
10
20
```

## 変数名の付け方

変数を付ける時は変数名を決める必要があります。
変数名の付け方については、明確な答えがあるわけでありませんが、
何を表すかが分かる名前を付けることが求められます。

それとは別で、守らなければいけないルールと、
Javaの世界で慣習となっている名前の付け方があります。

## ルール

- 変数名に使えるのは数字とアルファベット。記号は_(アンダースコア)と$のみ
- 数字で始めてはいけない
- 予約語は使用できない。予約語とは、Javaのキーワードとして使われてるもの

## 慣習

- 変数名は小文字のアルファベットから始まる
- 単語が複数続く場合は、単語の先頭が大文字になる

Main.java

```java
int abc_123 = 10;  // OK
// int abc! = 10;     // NG => 記号!は使えない

int a1 = 20;  // OK
// int 1a = 20;  // NG => 数字で始めることはできない

// int class = 30;  // NG => classは予約語なので使えない
int Class = 30;  // OK Javaは大文字と小文字は区別されるため、先頭が大文字なら使用可能。ただし推奨はされない。

String userName = "alice";   // 推奨 => ローワーキャメルケース
String user_name = "alice";  // 推奨されない => スネークケース
String UserName = "alice";   // 推奨されない => アッパーキャメルケース
```

名前を付ける時に、単語の区切りで先頭が大文字になる書き方を**キャメルケース**といいます。
単語の区切りをアンダースコアで表す書き方を**スネークケース**といいます。
キャメルケースの中でも、一番先頭の文字が小文字になる書き方を**ローワーキャメルケース**
先頭が大文字になる書き方を**アッパーキャメルケース**といいます。
プログラミング言語の種類によって、どの書き方が推奨されるかは変わってきます。
Javaの場合、変数名とメソッド名はローワーキャメルケース。
クラス名はアッパーキャメルケース、が推奨されています。

ちなみに、キャメルとは日本語ではラクダのことです。
キャメルケースとは、単語の先頭が大文字になることがラクダのコブに似ていることからそういった名前が付けられたようです。
スネークケースは、アンダースコアで区切る表現がヘビのように見えるのでそのような名前がついたようです。

## 型の種類

型の種類は大きく分けて2種類あります。
基本型（プリミティブ型とも呼ばれます。どちらで呼んでもかまいません。）と参照型の2種類です。

基本型は全部で8種類あります。
8種類ある基本型は大きく4つに分けることができ、整数、小数、文字、真偽値の4つです。
整数には4つ、小数は2つの種類があり、トータルで8種類です。

- 基本型
  - 整数型
    - byte：8bit(-127 ~ 128)
    - short：16bit(-32768 ~ 32767)
    - int：32bit(-2147483648 ~ 2147483647)
    - long：64bit(-9223372036854775808 ~ 9223372036854775807)
  - 小数（浮動小数点）
    - float：32bit
    - double：64bit
  - 文字
    - char
  - 真偽値
    - boolean（true, false）

変数を使用する場合、コンピュータのメモリ上に変数用の領域が確保されます。
型の隣にあるxxbitというのは、その型の変数を使用する際に確保される領域のサイズです。
整数の型の括弧の中の数値は、扱える値の範囲です。

8種類の中で使用頻度が高いものはintとdoubleの2つです。

整数の扱う場合、ほとんどの場合int型を使用します。
扱う数値の値がint型の範囲に納まらない場合、longを使用します。
それぞれの型の数値の範囲は覚えておく必要はありませんが、
byte, short, int, longの順で扱える値の範囲が大きくなることは覚えておきましょう。

小数の場合、ほとんどdouble型を使用します。
ただし、基本型で小数を扱う場合、丸め誤差が出る可能性があるので注意が必要です。
お金の計算など、誤差が許されない数値の計算については、基本型は使用せず、BigDecimalなどの参照型を使用して計算を行います。

基本型に該当しない型は全て参照型となります。
例えば、文字列を表すString型は参照型です。
参照型は無数にあり、自分で作成することも可能です。
(クラスが型になる。自分でクラスを作成すればそれが型になる)

参照型の場合、型の名前が大文字から始まります。（Stringなど）
基本型の場合は小文字から始まり、参照型の場合は大文字から始まると理解しておいても良いでしょう。

Main.java

```java
package app;

public class Main {
    public static void main (String[] args) {

        // 整数
        byte b = 10;   // 8bit
        short s = 2000;  // 16bit
        int n = 300000;    // 32bit // 整数のデフォルトの型
        long l = 5000000000L;  // 64bit // longにするにはLを付ける
        // long l = 5l;  // 小文字のlでも良い
        System.out.println(b); // => 10
        System.out.println(s); // => 2000
        System.out.println(n); // => 300000
        System.out.println(l); // => 5000000000

        // 小数
        float f = 1.3F;  // float型にするにはFを付ける
        // float f = 1.3f;  // 小文字のfでも良い
        double d = 2.5;  // 小数のデフォルトの型
        System.out.println(f); // => 1.3
        System.out.println(d); // => 2.5

        // 文字
        // シングルクォートでくくる。
        // 1文字のみ。空文字や2文字以上を代入することはできない。
        // Javaでは「文字」と「文字列」は明確に異なるのでしっかりと区別する。
        char c1 = 'a';
        System.out.println(c1); // => a
        // 内部的には数値(文字コード：Unicode)で管理されているため
        // 整数を入れることもできる
        char c2 = 97;
        System.out.println(c2); // => a // 文字コード表で97に該当する「a」が出力される

        // 真理値(boolean)
        // 取りうる値はtrueとfalseの2種類のみ
        boolean b1 = false; // 偽を表す値
        boolean b2 = true;  // 真を表す値
        System.out.println(b1); // => false
        System.out.println(b2); // => true

        // 参照型
        // 基本型以外全て
        // 以下はString（文字列）の例
        String str = "abc";
        System.out.println(str); // => abc
    }
}
```

結果

```text
10
2000
300000
5000000000
1.3
2.5
a
a
false
true
abc
```

## リテラル

ソースコードの中に直接書かれた値のことをリテラルと呼びます。
ソースコードに書かれた「100」「10.0」「true」「"abc"」などがリテラルです。
リテラルで書かれた整数はデフォルトではint型になります。
リテラルで書かれた整数はデフォルトではfloat型になります。

Main.java

```java
package app;

public class Main {
    public static void main (String[] args) {
        // 10は整数リテラル
        System.out.println(100); // => 100

        // 整数のリテラルはアンダースコアを挟むことも可能
        int num = 1000_000;
        // 表示は1000000となる
        System.out.println(num); // => 1000000

        // 以下はコンパイルエラー
        // intの範囲を超えたためエラー
        // System.out.println(10_000_000_000);

        // 以下はコンパイルエラーにならない
        // intの範囲を超える場合はLを付けてlong型にする
        // System.out.println(10_000_000_000L);

        // abcは文字列リテラル
        System.out.println("abc"); // abc
    }
}
```

結果

```text
100
1000000
abc
```

## 進数

int型の値を扱う場合、2進数、8進数、16進数で表現することも可能です。
2進数の場合、先頭に0bを付けます。
8進数の場合、先頭に0を付けます。
16進数の場合、先頭に0xを付けます。

Main.java

```java
package app;

public class Main {
    public static void main (String[] args) {
        int num2 = 0b00001111;  // 2進数
        int num8 = 010; // 8進数
        int num16 = 0x10; // 16進数

        System.out.println(num2); // => 15
        System.out.println(num8); // => 8
        System.out.println(num16); // => 16
    }
}
```

結果

```text
15
8
16
```

## 型変換

条件にもよりますが、異なる型に変換することが可能です。
互換性のある型同士であれば、「小さい型」⇒「大きい型」の変換は可能です。
「大きい方」⇒「小さい型」は、後に説明するキャスト演算子を使用すれば可能です。
互換性のない型同士は基本的に変換できなません。
ただしメソッドにより変換可能な型もあります。

Main.java

```java
package app;

public class Main {
    public static void main (String[] args) {
        // 整数型
        byte b = 100;
        short s = b; // OK
        int n = s;   // OK
        long l = n;  // OK
        // byte b2 = s;  // NG 後述のキャスト演算子の使用で無理やり変換は可能
        // short s2 = n; // NG 後述のキャスト演算子の使用で無理やり変換は可能

        // 小数型
        float f = 2.5F;
        double d = f;   // OK
        // float f2 = d;   // NG 後述のキャスト演算子の使用で無理やり変換は可能

        String str = "100";
        // int num = str;      // NG 文字列を直接数値に変換はできない
    }
}
```

---

## 文字列と数値の変換

プログラム上文字列を数値に変換することはよくあります。
Javaでは文字列を数値に変換する場合、「Integer.ParseInt」という命令を使用することで実現可能です。

これは、「IntegerクラスのParseIntメソッドを呼び出し、引数に文字列を渡すことで、int型の値が取得できる」という意味になります。
クラスやメソッドについては後述するので今は理解できなくても問題ありません。

ちなみに、数値に変換できない文字が渡された場合には、実行時のエラーになるので注意してください。

```java
public class App {
    public static void main(String[] args) throws Exception {
        String numStr = "100";
        int num = Integer.parseInt(numStr); // 数値に変換される
        System.out.println(num);

        String numStr2 = "100a";
        int num2 = Integer.parseInt(numStr2); // 数値に変換できず、実行時のエラーになる
        System.out.println(num2);

    }
}
```

---

## varの使用

Javaでは変数を使用する際には必ず型の指定が必要と書きましたが、実はバージョン9以降では、直接型名を指定せずに、varというキーワードを使用できます。

varはvariableの略で、変数の意味です。
型の指定が不要になるわけではなく、代入する値からJavaが型を推測して自動的に型指定を行ってくれるもので、型推論と呼ばれます。

```java
public class App {
    public static void main(String[] args) {
        var str = "Hello"; // varで変数を定義できる。
        System.out.println(str);  // => Hello
        str = "World"; // 再代入も可能
        System.out.println(str);  // => World

        // str = 123; // 異なる型の値を再代入はできない。コンパイルエラーになる
        
        // var num; // varを使う場合、値を代入せずに宣言だけしてくことはできない。コンパイルエラーになる

    }
}
```

結果

```text
Hello
World
```

バージョン9以降のJavaを使用する場合は積極的に活用してください。

---

## 変数まとめ

- 変数とはデータを格納する箱。またはデータにラベル付けして名前を付けたもの
- 変数名の付け方はJavaのルールで決められているものと、Javaの世界で観衆になっているものがある
- 変数を使用する際には型が必要
- 型とはデータの種類のこと
- 型は大きく分けて基本型と参照型に分かれる
- 基本型は7種類。よく使用するのは、intとdouble型
- 文字列を表すStringは参照型

## 講義動画

[変数と型](https://youtu.be/nqrANb5U8Uc)
