# 関数(ファンクション)

関数は、簡単に言えば処理をまとめたものです。
色んな個所で同じような処理をする場合、全ての個所に同じ処理を書いていると非常に効率が悪いです。
また、その処理の内容が間違っていた場合、全ての個所をなおす必要があり、開発の効率も悪く、バグの原因にもなります。
例えば、1つのプログラムの中で10か所、同じ計算処理を行っていたとします。

この時、10か所全てに同じ処理を書いていた場合、仮に計算の処理が間違っていた場合、10か所全て修正する必要があります。
時間もかかりますし、修正漏れがあった場合にはバグにつながってしまいます。

このような問題を解決する仕組みが関数です。
処理を1つにまとめておくことで、処理の記述内容を減らし、かつ修正するときの労力を最小限に抑えることができます。

関数の定義の仕方には3つの方法があります。

**パターン1 基本形**

```js
function 関数名(引数リスト) {
    処理
    return 戻り値;
}
```

**パターン2 無名関数、匿名関数**

```js
const 変数名 = function(引数リスト) {
    処理
    return 戻り値;
}
```

**パターン3 アロー式**

```jsx
const 変数名 = (引数リスト) => {
    処理
    return 戻り値;
}
```

アロー式では、引数が1つの場合は()を省略することができます。
また、処理がreturnのみの場合は、returnを省略することも可能です。

引数は関数が受け取ることができる値です。
引数は複数あっても構いません。必要なければ省略可能です。
returnでは関数の呼び出し元に返す値です。
こちらも必要なければ省略可能です。

処理の部分は何行でも書くことができます。
条件分岐や繰り返しなどの構文を使ったり、変数を使用したりなどができます。

サンプルコード

```js
'use strict';

// 関数定義1
// 基本形
// 引数を2つ取り、その加算結果を戻り値として返す関数
function add(n, m) {
    return n + m;
}
// 関数呼び出し
// 引数で渡した値の合計値がsumに代入される
let sum = add(10, 20);
console.log(sum);  // 30

// 関数定義2
// 変数への代入。無名関数、匿名関数と呼ばれる
const sub = function(n, m) {
    return n - m;
};  // 最後にセミコロンが必要

// 関数呼び出し
let dif = sub(30, 10);
console.log(dif);  // 20

// 関数定義3
// アロー式
const multi = (n, m) => {
    return n * m;
}
// 関数呼び出し
let ans = multi(20, 3);
console.log(ans);  // 60

// アロー式 省略形
const div = num => num / 2;
// 関数呼び出し
let num2 = div(100);
console.log(num2);  // 50

```

## 即時関数

即時間数は、即時実行関数とも呼ばれ、定義された後にすぐに実行される関数のことです。

構文

```js
(function 関数名(引数リスト) {
    処理
})(実引数);
```

関数名は省略することも可能です。

## 関数の再起呼び出し

JavaScriptでは関数の中で自分自身の関数を呼び出すことができます。
自分自身の関数を呼び出すことを再起呼び出しと呼びます。

以下は再起関数の例です。

```js
// 再起関数
// 200になるまで引数に値に10を足し続ける
function addTo200(num) {
    num += 10;
    if(num < 200) {
        num = addTo200(num);
    }
    return num;
}
```

これを再起を使わずループを使って実現すると以下になります。

```js
// 再起なしの通常の関数
// 100になるまで引数の値に10を足し続ける
function addTo100(num) {
    while(true) {
        num +=10;
        if(num >= 100) {
            break;
        }
    }
    return num;
}
```

処理の内容によっては再起呼び出しの方がすっきり書ける場合があります。

## 関数まとめ

- 関数とは処理をまとめたもの
- 関数は引数で値を受け取ることができる
- 関数は戻り値で値を返すことができる
- 関数の定義の仕方は3つの方法がある
- 通常の定義方法、無名関数、アロー式の3つがある
- 即時間数は定義の後にすぐに実行される関数

## 講義動画

[関数](https://youtu.be/bMX7KTSXIS0)

[関数の再起呼び出し](https://youtu.be/BrUqO31dIug)
