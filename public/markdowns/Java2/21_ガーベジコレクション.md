# ガーベジコレクション

---

ガーベジとはごみを表す言葉です。
ガーベジコレクションは直訳するとごみを集めることです。
プログラミングの世界でガーベジコレクションとは、メモリ上にある不要な領域（変数を使用するために確保したが、その変数が使用されなくなったところなど）を再び使える領域として解放してあげることです。　　
JavaではJVMが使用されていないメモリ領域を解放をする仕組みを持っており、その仕組みをガーベジコレクションと呼びます。

プログラムで変数を宣言したりインスタンスを作成したりすると、値を格納できる分のメモリ上の領域が確保されます。
新しい変数やインスタンスが増えるたびに新しいメモリ領域が確保され、使用できるメモリの領域は減っていくわけですが、当然処理が進む中で使用されなくなる変数も出てきます。
そのような参照されなくなった変数の領域は、再び解放してあげなければメモリを効率よく使用することができません。
JVMが自動的に参照されなくなったインスタンスなどを探し、自動的に削除してメモリを解放してあげる仕組みがガーベジコレクションです。

```java
package app;

public class Main {
    public static void main(String[] args) {
        // 文字列"ABC"のインスタンスが作成される
        String str = new String("ABC");
        // strの参照先が"123"に変わることで、"ABC"はどこからも参照されなくなる
        str = new String("123");
        System.out.println(str);
    }
}
```

この例では、strに"123"という文字列のインスタンスを代入した時点で、"ABC"という文字列のインスタンスはどこからも参照されなくなります。
このような場合に、JVMが適当なタイミングで参照されていないインスタンスを削除してくれます。

ちなみに、自分で意図的にガーベジコレクションを実行したい場合はSystem.gc()メソッドを呼び出すことで実行可能です。

## ガーベジコレクションのまとめ

- Javaでは使用されていないメモリ領域は自動的に解放される仕組みになっている
- その仕組みをガーベジコレクションと呼ぶ
- ガーベジコレクションは適当なタイミングで自動的に処理されるが、自分で呼び出すことも可能

## 講義動画

[ガーベジコレクション](https://youtu.be/oaNy7njwzIw)
