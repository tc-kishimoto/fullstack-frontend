# Javaの導入

---

## Javaとは

Javaは、プログラミング言語の1つです。
1996年に（旧）サンマイクロシステムズ（現オラクル）によって開発された言語です。
誕生してから20年以上経過していますが、2022年時点でも多くのシステムで利用されています。

## Javaの用途

プログラミング言語は様々な種類がありますが、言語によって用途がある程度決まっています。
Javaは比較的幅広い用途で使用されています。
Javaを利用することで

- コンソールアプリケーション（コマンドプロンプトなどから起動するアプリケーション）
- デスクトップアプリケーション（ダブルクリックで起動するアプリケーション）
- Webアプリケーション
- Androidアプリケーション

などの作成が可能です。
また、電化製品などの組み込みプログラムとしても利用されていました。

Javaの利用場面で最も多いのはWebアプリケーションです。
その中でも特に、規模の大きなWebアプリケーションの作成で利用される場面が多いです。
例えば、金融系でのWebアプリケーションなどで多く利用されます。
Webアプリケーションの場合、開発がフロントエンド（ブラウザ側）とバックエンド（サーバーサイド側）に分かれる場合がありますが、JavaはWebアプリケーションのバックエンドの実装として多く使用されています。

規模の小さなWebアプリケーションの場合、PHPやRubyなどの言語が使用される場合が多く、Javaはあまり使用されません。

昔は、Javaアプレットという機能で、ブラウザ上で動作するプログラムの作成されていました。
しかし、Flashなどの登場でJavaがブラウザ上で動くプログラムとして利用される場面はなくなりました。(現在はJavaScriptなどの進化に伴ってFlashもあまり使われなくなりました。)
最近ではブラウザ上で動作するフロントエンドはJavaScriptが主流で、今後もしばらくはJavaScriptの技術の発展が見込まれそうです。

---

## Javaの特徴

### オブジェクト指向型言語

Javaはオブジェクト指向型の言語です。
オブジェクト指向が何か、について詳細は追々解決します。
現在、オブジェクト指向の機能が備わっている言語は数多くありますが、
その中でもJavaはオブジェクト指向を用いた開発を前提とした言語になっており、オブジェクト指向を学ぶにはJavaが最も適した言語だと言えます。

### プラットフォームに依存しない

ここでいうプラットフォームとはコンピュータOSのことを指します。
OSとは、PCの場合はWindowsやMac、スマホの場合はAndroidやiOS、といったものです。
C言語など、Javaが登場するよりも前に使用されていたプログラミング言語では、プログラムを作成してもOSが変わると＜プログラムをコピーしてもそのまま動作しませんでした。

WindowsならWindows用、Mac OSならMac OS用としてプログラムを作成（ビルド）し直す必要がありました。しかし、Javaは中間コード方式という仕組みを使うことで、OSが変わってもプログラムを作り直すことなく動作させることを実現しました。

現在は同じような仕組みを持った言語は珍しくありませんが、Javaが登場したばかりのころは大きな特徴の1つでした。当時はWrite once, run anywhere（一度プログラムを書けば、どこでも実行できる）というスローガンとしても有名になりました。

### 難易度

Javaは、プログラミング初心者が最初に学ぶ言語としては決して難易度は低くありません。
初学者が独学で学ぶにはハードルが高い言語と言えるでしょう。
しかし、Javaはオブジェクト指向前提の言語であることから、オブジェクト指向を学ぶにはJavaが最も適した言語だといえます。
また、難易度が低くないからこそ、Javaを理解しておくことで、
その後、他のプログラミング言語を学ぶときには理解しやすくなります。

※補足  
Javaが初学者にとって難易度が高いと言われる理由に、記述量の多さが挙げられます。
Javaは簡単なプログラムを動かす場合にも、他の言語に比べると多くの記述が必要になります。
（オブジェクト指向を前提とした言語のため、必ずクラスを作成する必要があり、その中にメソッドを作成する必要がある。）
他の言語が1行書けば動くような処理でも、Javaでは最低でも3行以上のソースコードを記述しなければ動かすことすらできませんでした。
しかし、Javaもバージョンが上がるごとに新しい機能や便利な記述方法が登場しており、学習することのハードルは下がってきています。
そのため、今後もバージョンアップが繰り返されることで、Javaを学ぶハードルは下がっていくことが予想されます。

### Javaを学ぶメリット

Javaをちゃんと理解することができれば、オブジェクト指向を理解したと言えるかと思います。
話が重複しますが、オブジェクト指向が理解できれば、後々他の言語を学ぶときに非常に有利です。
また、未来のことは予想できませんが、2020年代になってもJavaは多く利用されている言語です。
なのでJavaを習得しておくことは、プログラマー（システムエンジニア）として働きたい場合には有利になります。
傾向としては、Javaは金融系などの大規模な開発でよく使用される傾向があります。

### Javaの特徴のまとめ

- Javaは多くのシステムで利用されているプログラミング言語
- Javaの難易度は低くないが、Javaを理解することでその後の言語の学習が楽になる
- Javaはオブジェクト指向を学ぶのに適している言語

---

## JDK・JRE・JVM

Javaのプログラミングの始める前に、JDK, JRE, JVMについて知っておきましょう。
これらはJavaのプログラムを動かしたり、Javaでプログラムを開発する際に必要となるツールです。
Javaを理解する上で欠かせない用語ですので、それぞれの用語の意味を押さえておいてください。

### JVM

JVMは、Java Virtual Machineの略で、日本語では「Java仮想マシン」と呼ばれます。
Javaのソースコード（Javaの文法に沿って書かれた人間が読めるもの）をコンパイル（変換）すると、クラスファイルと呼ばれるファイルが生成されます。
クラスファイルは中間コード、バイトコードとも呼ばれます。
クラスファイルは機械語（0と1のビット列）にはなっていないため、コンピュータがそのまま実行することはできません。
この中間コードであるクラスファイルを機械語に変換しながら実行してくれるソフトウェアがJVMです。
つまり、Javaのプログラムを動かすためにはJVMを用意する必要があります。
このような仕組みは少々面倒に感じるかもしれませんが、Javaの特徴の部分で説明した、「プラットフォームに依存しない」という特徴は、JVMがあるからこそ実現できる仕組みでもあります。

### JRE

JREはJava Runtime Environmentの略です。簡単に言うとJavaの実行環境のことです。
Javaのプログラムを動かすにはJVMが必要だという説明をしましたが、JVMは通常単体でダウンロードして使用するものではありません。
通常Javaで作られたプログラムを動かしたい場合、JREをダウンロードしてインストールします。
JREはJVMを含む、Javaを実行するのに必要なソフトの集まりです。

### JDK

JDKはJava Development Kitの略です。
一言でいえば、Javaを開発するのに必要なツールの集まりです。
Javaでプログラム開発を行うためには、当然Javaのプログラムを動かせなければいけません。
なので、JDKにはJREも含まれています。
JREに、コンパイラ（コンパイルするためのソフトウェア）や標準ライブラリ（Javaの開発で利用できるプログラム群）といった開発するのに必要なツールが加わったものだと考えてください。

まとめると、

- JVMはJavaのプログラムを実行するソフトウェア
- Javaのプログラムを動かしたければJREが必要
- Javaでの開発が行いたければJDKが必要

となります。
包含関係で表すと、
JDK > JRE > JVM
となります。
JREやJDKはネット上からダウンロードすることが可能です。

### プログラミングの分類からみたJavaの立ち位置

プログラミング言語には様々な種類があり、分類方法にも様々な分類方法があります。
分類方法の中でも、コンパイラ式かインタプリタ式かという分類があります。
これは、プログラミング言語で書かれたソースコードをどのタイミングで変換するか、による分類方法です。

コンパイラ式の言語の場合、ソースコード書いた後にコンパイラというプログラムでコンパイルします。
そうすることで機械語に変換されます。
つまり、プログラムを実行する前にソースコードを機械語に変換するのがコンパイラ式の言語です。

一方、インタプリタ式の場合、事前に変換する必要はありません。
プログラムを実行時する際に、実行と平行して機械語へと変換します。

コンパイラ式の言語の場合、実行前の時点であらかじめ機械語に変換されているため、変換後のプログラムはコンピュータがそのまま実行できます。
そのため、同じ処理を実行する場合、インタプリタ式の言語に比べると実行速度は速い傾向にあります。
しかし、コンパイラ式の場合、作成したプログラムを異なるプラットフォーム（OS）にコピーした場合、正常に動作しません。
例えば、Windowsで作成したプログラムをMac OSにコピーした場合などです。
一方でインタプリタ式の場合、実行時のタイミングで機械語に変換されるため、ソースコードをそのままコピーすれば異なる環境でも動作します。
つまり、それぞれにメリットとデメリットがあります。

Javaは、コンパイラ式とインタプリタ式両方の性質を持っています。
事前にコンパイルが必要なものの、コンパイル時には機械語ではなく、中間コード（classファイル）になります。
そして実行時にJVMが中間コードを機械語に変換しながら実行してくれます。
事前にコンパイルすることで実行速度を保ちつつ、JVMという存在のおかげで環境を選ばずに動作してくれます。

---

## 環境構築

以降はWindowsを前提とします。
Mac OSを使用する場合は他のサイトを参考に環境構築を行ってください。

プログラミングを行う際、最初に行うべきことは環境構築です。
Javaでは環境構築の方法としていくつかの方法がありますが、ここではその1つを紹介します。
これ以降の内容はここでの環境を前提としますが、どの環境でも構いません。

ちなみに、プログラミングを学習する上で最初のハードルとなるのが、開発環境の構築です。
開発環境を構築する段階で挫折してしまう人も少なくありません。
最近ではpragateなど、開発環境を作成しなくてもネット上から簡単に学習できる環境も多くなりました。
そのような環境は便利ですが、自分のローカル環境で自由にプログラミングする場合や、本格的なアプリを作成する場合は、自分のPC環境にプログラム動作環境を作る必要があります。
また、プログラマーとして働くのであれば、環境構築は避けては通れない作業になります。
様々な環境を作り、環境構築に慣れておきましょう。
1つのサイトを参考にしてうまくいかなかった場合は、他のサイトや書籍などを参考にして色々試行錯誤してみましょう。

### テキストエディタの用意

Javaによる開発を行う場合、JDKさえあれば開発をはじめることは可能です。
しかし、開発の効率を上げるためにはその他、便利なツールを使っていく必要があります。
まず必要になるのはテキストエディタです。
ソースコード作成するためにはテキストエディタが優秀でなければ開発の効率は上がりません。
テキストエディタは沢山の種類がありますが、ここでは
「Visual Studio Code」
というテキストエディタを使用します。
（以下、「VS Code」と呼びます）

以下のサイトから自分のOSに合ったインストーラをダウンロードし、
インストールを行ってください。

[https://code.visualstudio.com/download](https://code.visualstudio.com/download)

以下、VS CodeでJavaを動作させるまでの手順を簡単に説明しますが、VS Codeでの環境構築の情報は他のサイトでも色々とアップされています。
このサイトの説明で分からない場合は他のサイトも参考にしてみてください。

### 拡張機能のインストール

VS Codeが起動したら、拡張機能をインストールします。
VS Codeは拡張機能をインストールしていくことで、便利な機能をどんどん追加していくことが可能です。
VS Codeはインストールした時点では表記が英語になっているため、日本語にしたい場合は「Japanese Language Pack for Visual Studio Code」をインストールします。

次に、Javaの開発が行えるように「Java Extension Pack」をインストールします。

### JDKのダウンロードとインストール

Javaによる開発を行うには、JDKが必要です。
JDKには、Oracle社が提供している「OracleJDK」と、Oracle以外の企業や団体が提供している「OpenJDK」の2種類があります。
サポートを受けられるかどうかなどの違いはありますが、学習目的でJavaを利用する場合には差はありませんので、どちらを使用しても構いません。

VS Codeに「Java Extension Pack」をインストールした時点でJDKがインストールされていない場合、
VS Code経由でRed Hat社のOpenJDKのダウンロードが可能です。

Oracleのサイトからダウンロードする場合は以下のURLからダウンロードします。

[https://www.oracle.com/technetwork/java/javase/downloads/index.html](https://www.oracle.com/technetwork/java/javase/downloads/index.html)

自身のご利用のPCのOSやCPU環境に合わせてダウンロードを行い、そのままインストールを行ってください。

JDKのバージョンは基本的に最新のバージョンを使用して問題ないかと思います。
現在はJDKのバージョンは半年ごとに1ずつ上がる仕様になっています。
2020年時点では、現場ではバージョン8が最も利用されており、その次が11となっているようです。
ただし、新しいバージョンの方が使用できる機能や構文が多いため、ここでは学習用としては最新版を使用することをおすすめします。
どのバージョンを使用しても構いませんが、
ここではバージョン14以降を前提に解説を行います。

※バージョン8以降で追加された構文などは適宜注意書きを入れるています。

### 環境変数の設定

JDKのインストールが終わったら、環境変数のJAVA_HOMEとPATHを設定します。
環境変数は、OSがプログラムを実行する際などに参照することができる値です。
この設定により、Javaのコンパイルや実行の操作が楽に行えるようになります。

#### JAVA_HOMEの設定

環境変数の設定で、JAVA_HOMEという変数名に、JDKのインストール場所を設定しておくことで、Javaの開発を行う際の導入がスムーズになります。
設定の手順は以下です。

* コントロールパネル ⇒ システムとセキュリティ ⇒ システムを選択
* システムの詳細設定 ⇒ 環境変数 ⇒ システム環境変数の「新規」ボタン押下
* 変数名：JAVA_HOME、変数値：JDKのインストール場所（例：C:\Program Files\Java\jdk-17）
* OKを押してウィンドウを閉じる

#### PATHの設定

環境変数PATHを設定しておくことで、コマンドプロンプトやターミナルなどのコマンドラインツールからのプログラムの実行を簡潔にできます。
設定の手順は以下です。

* コントロールパネル ⇒ システムをセキュリティ ⇒ システム  
* ⇒ システムの詳細設定 ⇒ 環境変数 ⇒「Path」を選択し「編集」を押下  
* ⇒「環境変数名の編集」のダイアログが開いたら「新規」を押下
* ⇒「%JAVA_HOME%\bin」を入力してOKを押してウィンドウを閉じる

※誤ってPathの値を上書きしたり消してしまうと、PCが正常に動作しなくなる可能性があるため、慎重に作業を行ってください。
特に、Pathを選択後に「新規」を押下しないように注意してください。

#### 環境変数の確認

環境変数がうまく設定できたかどうかを確認します。
コマンドプロンプト、またはWindows PowerShellを起動します。

以下の2つのコマンドを入力し、それぞれでバージョン情報が表示されれば正しく設定されています。

```bash
javac --version
```

結果

```text
javac 18
```

```bash
java --version
```

結果

```text
java 18 2022-03-22
Java(TM) SE Runtime Environment (build 18+36-2087)
Java HotSpot(TM) 64-Bit Server VM (build 18+36-2087, mixed mode, sharing)
```

---

### 動作確認

以上でJavaを動かす環境は整いました。
ここから動作検証します。

まずはVisual Studio Codeでコマンドパレットを開きます。
(「Ctrl + shift + p」または「表示タブ⇒コマンドパレット」）
「Java: Create Java Project」を選択します。
ビルドツールの選択が表示されますが、ここでは「No Build Tools」を選択します。
エクスプローラが起動するので、Javaのプロジェクト（ソースコードなどを保存する場所）を作成したいフォルダを選択します。
プロジェクト名の入力を求められるので、適当なプロジェクト名を入力します。
プロジェクト名は任意です。
JavaLerningなど、適当な名前で作成します。

プロジェクトの作成が完了すると、プロジェクト内の「src\app」フォルダの中に、「App.java」というファイルがあります。

```java
package app;

public class App {
    public static void main(String[] args) throws Exception {
        System.out.println("Hello Java");
    }
}

```

このファイルをの中身は上記のようになっているはずです。
ここで、3行目と4行目の間に
「Run|Debug」
という文字が出てくるかと思います。
ここで「Run」を押下してください。

「デバッグコンソール」と呼ばれる画面下部に
「Hello Java」という文字が出力されていればOKです。

### IDEによる開発

ここではVS Codeでソースコードを作成する前提で進めていきますが、IDE（統合開発環境）を導入することによる開発も可能です。
IDEとは、特定のプログラミング言語に対して、実行環境、テキストエディタ、コンパイラ、デバッガ、といった開発を行う上で便利なツール群がまとめられた開発ツールのことです。
言語ごとに様々なIDEがありますが、Javaの場合、「eclipse」や「NetBeans」、「Intellij IDEA」などが有名です。
ここでは詳しく紹介しませんが、興味があれば他のサイトを参考にして導入してみても良いでしょう。
ある程度開発の規模が大きくなると、IDEによる開発が便利です。

---

## jshellによる動作確認

Java 9からJDKにjshell（Java Shellツール）が梱包され、Javaプログラムの実行・確認が容易にできるようになりました。
jshellを使用することで、プログラム実行時にコンパイルする手順をスキップすることでき、クラスやメソッドの作成も省略することが可能です。

コマンドプロンプトなどのコマンドラインツールを開き、以下のコマンドを入力してEnterキーを押します。

```bash
> jshell
```

環境変数の設定がされていれば、jshellが起動して以下のように表示されます。

```java
|  JShellへようこそ -- バージョン18
|  概要については、次を入力してください: /help intro

jshell>
```

この状態でJavaのプログラムを入力してEnterキーを入力すると、そのまま実行され、結果が表示されます。

```java
jshell> 1 + 1
$1 ==> 2

jshell> System.out.println("Hello Java");
Hello Java
```

クラスやメソッドを作成せずとも、処理をそのまま書くだけで実行できるため、Javaの学習には最適なツールです。
簡単なプログラムを書いて動作を検証したい場合には積極的に活用すると良いでしょう。

---

### 講義動画

[環境構築【VS Code編】](https://youtu.be/E0zWa7KjsVY)

[Javaの概要](https://youtu.be/G7Esbe0R_pQ)
