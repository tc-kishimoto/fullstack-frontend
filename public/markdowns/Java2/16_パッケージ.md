# パッケージ

---

パッケージとは、簡単にいえばフォルダ（ディレクトリ）のことです。
パソコンやスマホでデータを管理する場合、写真は写真用のフォルダ、動画は動画用のフォルダ、音楽は音楽用のフォルダと、フォルダを分けて管理したほうが分かりやすくなります。

これはプログラミングでも同じです。
プログラムの規模が大きくなると、ファイルの数が多くなって、そのままだと管理が難しくなります。
プログラムの機能によってフォルダを分けてあげることで管理がしやすくなり、
プログラムの把握が容易になります。

また、同じフォルダ内で同じ名前のファイルを複数作ることはできませんが、
フォルダが分かれていれば同じファイル名でファイルを作成することができます。
Javaでも同じクラス名を作成したい場合に、管理する場所を分けておけば、同じ名前が使用できます。

つまりパッケージとは

- カテゴリごとにファイルを整理して分かりやすくする
- 同じ名前のクラスを作成しても困らないようにする

という目的で存在します。

今までのソースコードの中に

```java
package app;
```

という記述が含まれていましたが、これがパッケージの宣言です。
「app」というパッケージに含まれるソースコードということになります。

クラスを作成する際、どのパッケージにも属さない状態でクラスを作成することも可能です。
どのパッケージにも属さないクラスを「デフォルトパッケージ」のクラスと呼びます。
通常開発を行う際には、デフォルトパッケージのクラスは推奨されていません。
基本的には役割に合ったパッケージを作成して、パッケージに属するようにしておきましょう。

Utility.java

```java
// パッケージ宣言はクラス宣言の上に書きます
package util;

public class Utility {
    public static int add(int a, int b) {
        return a + b;
    }
}
```

## 別パッケージのクラスの利用

パッケージ名から指定することで利用可能です。
この指定方法を完全修飾名といいます。

Main.java

```java
package app;

public class Main {
    public static void main(String[] args) {
        // パッケージ名.クラス名.メソッド名
        int num = util.Utility.add(10, 20);
        System.out.println(num);
    }
}
```

毎回完全修飾名でクラスを指定するのは面倒です。
importの機能を使えば、クラス名だけでの使用が可能になります。

Main.java

```java
package app;

import util.Utility; // パッケージ名.クラス名 とすることで、そのクラスが使用可能となる

public class Main {
    public static void main(String[] args) {
        int num = Utility.add(10, 20); // クラス名でアクセス可能
        System.out.println(num);
    }
}
```

1つのパッケージの中に複数のクラスが含まれている場合があります。
その場合に「*」を使用すると一括でインポートすることができます。
しかし、どのクラスを使用しているのか分かりにくいため、推奨されません。
また、VS Codeやeclipseなどを使って開発している場合、importされていない他パッケージのクラスを使用すると、自動的にインポートの候補を表示して補完してくれる機能もあります。
そのため、import文を書くことに時間がかかることはほとんどありません。
なので「*」は使用せず、各クラス名を指定してimportする方がよいでしょう。

Main.java

```java
package app;

import util.*;

public class Main {
    // 以下略
}
```

注意点としてJavaのパッケージには階層構造はないということを知っておきましょう。

```java
package a;
public class ClassA {

}
```

```java
package a.b;
public class ClassB {

}
```

上記のようなパッケージとクラスがあったとします。
OS上からソースを確認しようとすると「a」というフォルダの中にClassA.javaというファイルと「b」というフォルダがあります。
そして「b」というフォルダの中にClassB.javaというファイルがあります。
OS上から見れば「a」と「b」は階層構造にありますが、Javaのパッケージでは「a」というパッケージと「a.b」というパッケージは全く別物です。
インポート宣言部で

```java
import a.*
```

と書いたとしても、実際にインポートされるのはClassAだけで、
「a.b」パッケージに含まれるクラスはインポートされないということを知っておきましょう。

## パッケージ名の付け方

パッケージ名は、自社のドメイン名を逆にしたものを使用するのが一般的です。
ドメインが「[xxxx.co.jp](http://xxxx.co.jp/)」の場合、パッケージ名は「jp.co.xxxx」のようになります。
どのプロジェクトで使用したクラスかが分かるように、プロジェクト名をパッケージに付ける場合もあります。
いずれにしても、インターネット上で被らない名前を付けることが望ましいでしょう。

## java.langパッケージ

パッケージが異なるクラスを利用するためには、クラスをインポートするか、完全修飾名を使用するのどちらかが必要になります。
今まで、文字列を使用する際に何気なくStringというクラスを使用していました。
Stringクラスは普段自分たちがつくるプログラムとは別パッケージにありますが、インポート宣言や完全修飾名を使用しなくても利用することができました。
これはどういう仕組みかというと、Javaでプログラムを開発する際、インポート宣言を書かなくても暗黙的にインポートされるパッケージがあります。
それが「java.lang」というパッケージなのですが、実はStringクラスはこのクラスに含まれています。
そのため、何の意識もすることなくStringクラスが使用できたのです。

java.langパッケージには、Stringクラス以外にも
ObjectクラスやMathクラス、Integerクラスなど、
普段からよく使用するクラスがまとめられています。
他にどんなクラスがあるのかはAPIリファレンスを参照ください。

### パッケージのまとめ

- パッケージとはクラスを役割毎にフォルダ分けする仕組み
- パッケージには階層構造はない
- パッケージ宣言は先頭に書く
- パッケージ名はドメインを逆から書くのが一般的
- 別パッケージのクラスを使用する場合、パッケージ名から指定するか、importを使用する
- importでは「*」を使って一括インポートができるが、あまり使用されない
- Javaでは「java.lang」というパッケージがデフォルトでインポートされている

---

## 講義動画

[パッケージ](https://youtu.be/_4_7ba3BLRA)

[命名規則](https://youtu.be/cQm-GzifNYM)
