# Laravel演習問題1

---

## 演習問題-DB操作-基本
DB単元の演習問題をLaravelのDB操作機能を使用して取り組んでみましょう。
コマンドライン上で操作するよう指示のある問題は、実行したコードをメモしてPHPファイルとして提出してください。

---

学生と選考を表すテーブルを作成し、登録、検索、更新、削除の操作を行います。


テーブル構成のイメージ

<学生>

|student_id|student_name|grade|hometown|major_id|
|----------|------------|-----|--------|--------|
|1|山田|1|宮城|1|
|2|田中|1|東京|2|

<専攻>

|major_id|major_name|
|--------|----------|
|1|英文学|
|2|応用科学|

※学生テーブルと選考テーブルはmajor_idで紐づいている。

例) 山田の選考は"英文学"

### 1. データベース作成  

"laravel_exam"という名前のデータベースを作成してください

### 2. マイグレーション-その1

マイグレーションファイルを作成、実行して"major"という名前のテーブルを作成してください。カラム情報は下記の通りです。

|カラム名|型|制約|説明|
|--------|--|----|----|
|major_id|INT|PRIMARY KEY|主キー|
|major_name|VARCHAR(50)| |専攻名|

### 3. マイグレーション-その2

マイグレーションファイルを作成、実行して"student"という名前のテーブルを作成してください。カラム情報は下記の通りです。

|カラム名|型|制約|説明|
|--------|--|----|----|
|student_id|INT|PRIMARY KEY|主キー|
|student_name|VARCHAR(50)||学生の氏名|
|grade|INT||学年|
|hometown|VARCHAR(50)||出身|
|major_id|INT|NOT NULL<br>REFERENCES major(major_id)|専攻(majorテーブルのmajor_idと紐づく)|


### 4. "major"テーブルへデータ登録  

シーディングを使用して"major"テーブルへ下記データを登録してください

|major_id|major_name|
|--------|----------|
|1|英文学|
|2|応用科学|
|3|情報工学|
|4|経済学|
|5|国際文化|

### 5. "student"テーブルへデータ登録  

シーディングを使用して"student"テーブルへ下記データを登録してください

|student_id|student_name|grade|hometown|major_id|
|----------|------------|-----|--------|--------|
|1|山田|1|宮城|1|
|2|田中|1|東京|2|
|3|佐藤|1|東京|3|
|4|鈴木|2|鹿児島|1|
|5|高橋|2|北海道|2|
|6|吉田|2|東京|1|
|7|伊藤|3|鹿児島|2|
|8|山本|3|神奈川|3|
|9|森本|4|沖縄|4|
|10|吉岡|4|神奈川|5|

---

これより先はコマンドライン上からテーブルを操作してください。
```shell
php artisan tinker
```

---

### 6. studentテーブル検索-その1

コマンドライン上で操作してstudentテーブルに対して、gradeが1のレコードを取得してください  

<実行結果イメージ>  
|student_id|student_name|grade|hometown|major_id|
|----------|------------|-----|--------|--------|
|1|山田|1|宮城|1|
|2|田中|1|東京|2|
|3|佐藤|1|東京|3|

### 7. studentテーブル検索-その2  

コマンドライン上で操作してstudentテーブルに対して、hometownが"東京"のレコードを取得してください  

<実行結果イメージ>  
|student_id|student_name|grade|hometown|major_id|
|----------|------------|-----|--------|--------|
|2|田中|1|東京|2|
|3|佐藤|1|東京|3|
|6|吉田|2|東京|1|

### 8. majorテーブル検索  

コマンドライン上で操作してmajorテーブル全レコードのmajor_nameのみを取得してください  

<実行結果イメージ>  
|major_name|
|英文学|
|応用科学|
|情報工学|
|経済学|
|国際文化|

### 9. studentテーブルのレコード更新  

コマンドライン上で操作してstudentテーブルに対して、student_idが10のレコードのgradeを3へ更新してください  

### 10. studentテーブルのレコード削除  

コマンドライン上で操作してstudentテーブルに対して、student_idが10のレコードを削除してください

---

## 演習問題-発展

---

売上と顧客と表すテーブルを作成し、登録、検索、更新、削除の操作を行います。

### テーブル構成のイメージ

<売上>

|sales_id|order_date|customer_id|amount|
|--------|----------|-----------|------|
|1|2018/11/01|1|30000|
|1|2018/10/01|3|5000|

<顧客>

|customer_id|customer_name|
|-----------|-------------|
|1|田中|
|2|鈴木|

※売上テーブルと顧客テーブルはcustomer_idで紐づいている  
例) sales_idが1の売上は田中さんからの売上



### 1. データベース作成  

"laravel_exam_dev"という名前のデータベースを作成してください

### 2. マイグレーション-その1  

マイグレーションファイルを作成、実行し、"customer"という名前のテーブルを作成してください。カラム情報は下記の通りです  
("説明"はカラムに対する説明のため、SQL作成には関係ありません)  

|カラム名|型|制約|説明|
|-------|--|----|----|
|customer_id|INT|PRIMARY KEY|顧客ID(管理番号)<br>主キー|
|customer_name|VARCHAR(50)||顧客名|

### 3. マイグレーション-その2  

マイグレーションファイルを作成、実行し、"sales"という名前のテーブルを作成してください。カラム情報は下記のとおりです。

("説明"はカラムに対する説明のため、SQL作成には関係ありません)

|カラム名|型|制約|説明|
|-------|--|----|----|
|sales_id|INT|PRIMARY KEY|売上ID(管理番号)<br>主キー|
|order_date|DATE||注文日|
|customer_id|INT|NOT NULL<br>REFERENCES customer(customer_id)|顧客ID(customerテーブルのcustomer_idと紐づく)|
|amount|DECIMAL||売上金額|

### 4. "customer"テーブルへデータ登録  

シーディングを使用して下記データを登録してください。


|customer_id|customer_name|
|-----------|-------------|
|1|田中|
|2|鈴木|
|3|田中|
|4|田島|

### 5. "sales"テーブルへデータ登録  

シーディングを使用して下記データを登録してください。

|sales_id|order_date|customer_id|amount|
|--------|----------|-----------|------|
|1|2018/11/01|1|3000|
|2|2018/10/01|3|5000|
|3|2018/10/01|4|6000|
|4|2018/11/02|2|2000|
|5|2018/11/15|2|NULL|

※値をNULLにするには、セットする値にNULLと記述するか、値そのものをセットしない。

### 6. salesテーブル検索-その1　　

コマンドライン上で操作してsalesテーブルに対して、amountが5000よりも小さいレコードを取得してください。


<実行結果イメージ>  
|sales_id|order_date|customer_id|amount|
|--------|----------|-----------|------|
|1|2018/11/01|1|3000|
|4|2018/11/02|2|2000|

### 7. salesテーブル検索-その2  

コマンドライン上で操作してsalesテーブルに対して、amountが5000以上のレコードを取得してください。


<実行結果イメージ>  
|sales_id|order_date|customer_id|amount|
|--------|----------|-----------|------|
|2|2018/10/01|3|5000|
|3|2018/10/01|4|6000|

### 8. salesテーブル検索-その3  

コマンドライン上で操作してsalesテーブルに対して、全てのカラムと、amountに「1.1」を掛けたカラムを取得してください。

※カラムに数値を掛ける方法は補足説明を参考にしてください。


<実行結果イメージ>  
|sales_id|order_date|customer_id|カラム名なし|
|--------|----------|-----------|------|
|1|2018/11/01|1|3000|3300|
|2|2018/10/01|3|5000|5500|
|3|2018/10/01|4|6000|6600|
|4|2018/11/02|2|2000|2200|
|5|2018/11/15|2|NULL|NULL|

### 9. salesテーブル検索-その4  

コマンドライン上で操作してsalesテーブルに対して、amountが「NULL」でないレコードを取得してください。


<実行結果イメージ>  
|sales_id|order_date|customer_id|amount|
|--------|----------|-----------|------|
|1|2018/11/01|1|3000|
|2|2018/10/01|3|5000|
|3|2018/10/01|4|6000|
|4|2018/11/02|2|2000|

### 10. customerテーブル検索-その1  

コマンドライン上で操作してcustomerテーブルに対して、customer_nameが"田中"ではないレコードを取得してください。　　
※右辺と左辺が等しくないという判定方法は補足説明を参考にしてください。


<実行結果イメージ>  
|customer_id|customer_name|
|-----------|-------------|
|2|鈴木|
|4|田島|

### 11. salesテーブルのレコード更新  

コマンドライン上で操作してsalesテーブルに対して、sales_idが4のレコードの、order_dateを'2018/11/05'へ、customer_idを4へ更新してください。


### 12. salesテーブルのレコード削除  

コマンドライン上で操作してsalesテーブルに対して、amountが「NULL」のレコードを削除してください。