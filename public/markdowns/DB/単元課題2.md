# DB_単元課題

---

## 基本課題

課題はデータベース設計です。
架空のコンビニのレシートから販売情報を管理するテーブルを設計します。
以下はレシートのイメージです。

![7eb549afa8ea596c54203249765ec51df35432828fcad740ecf8560bae10cf68](https://user-images.githubusercontent.com/88996082/170805180-0b2c4a93-f1f0-4179-8e86-624be5e84acd.png)

---

以下の手順を踏み、データベース設計を行ってください。

1. データの洗い出し
2. データの正規化
3. データ型の決定
4. テーブル定義書の作成
5. ER図の作成
6. DDLの作成
7. データ作成用SQLの作成

※テーブル定義書はマークダウンを使用して作成してください。
※ER図は画像ファイルとして出力したものも同時に提出してください。
※インターネットを使用した検索は問題ありません。

※ヒント
伝票（レシートなど）のテーブル設計では、
伝票そのものを表現するテーブルと、伝票の明細（商品の情報など）を表すテーブルに分割する必要があります。

---

### 提出物

提出物は以下になります。

* 提出物とファイル名は下記とします
  * DDL()：db_task_ddl.sql
  * ER図：db_task.a5er, db_task.png
  * テーブル定義書：db_task_テーブル定義書.md
  * データ作成用SQL：db_task_insert.sql

---

## 発展課題

基本課題で設計したテーブル情報をもとに、レシート情報が一括で取得できるビューを考えます。

以下のSQL文でレシートの情報が取得できるビュー(v_receipt)を作成してください。

```sql
SELECT * FROM v_receipt
WHERE 伝票番号 = '00000001';
```

結果

|伝票番号|店名|住所|電話番号|売上日時|レジNo|従業員No|商品名|商品単価|値引額|消費税率|消費税額|8%小計|10%小計|合計金額|
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|00000001|日本橋店|日本橋1-1-1|03-111-2222|2022-04-01 19:00|1|001|いろはす天然水|100|-10|8|7|210|403|669|
|00000001|日本橋店|日本橋1-1-1|03-111-2222|2022-04-01 19:00|1|001|ツナマヨおにぎり|120|0|8|9|210|403|669|
|00000001|日本橋店|日本橋1-1-1|03-111-2222|2022-04-01 19:00|1|001|ファブリーズ|400|0|10|40|210|403|669|

---

### 提出期限

課題日の17:30

* 提出したら講師またはアシスタントへ報告に来てください。
* 未完成でも提出し、進捗状況をあわせて報告してください。
