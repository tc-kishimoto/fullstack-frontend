# DB_演習問題(DBの機能)

---

* 演習問題1で作成したstudent, major, salesテーブルに対して、様々なオブジェクトを作成します。

* "db_exam4.sql"というテキストファイルを作成し、SQL文を全て記載して提出してください。

### 1. インデックスの作成

1. majorテーブルのmajor_nameカラムに対してインデックスを作成してください。index名は任意とします。
2. studentテーブルのstudent_nameカラムに対してインデックスを作成してください。index名は任意とします。
3. studentテーブルのgrate, student_nameの2つのカラムに対して、マルチカラムインデックスを作成してください。index名は任意とします。

### 2. ビューの作成

以下のSQLで実行結果イメージになるようなビューを作成してください。

```sql
SELECT * FROM v_student
```

<実行結果イメージ>

|student_id|student_name|hometown|major_name|
|----------|------------|--------|----------|
|1|山田|宮城|英文学|
|4|鈴木|鹿児島|英文学|
|5|高橋|北海道|応用科学|
|7|伊藤|鹿児島|応用科学|
|9|森本|沖縄|経済学|
|8|山本|神奈川|情報工学|

### 3. マテリアルズド・ビュー

mv_studentという名前で、2の結果と同じになるマテリアルズド・ビューを作成してください。

### 4. ファンクション

引数で受け取った値に1.1をかけて小数点を取得するファンクションを作成してください。
その関数を使用してsalesテーブルから以下の結果を得るSQLを作成してください。

<実行結果イメージ>  
|sales_id|order_date|customer_id|amount|カラム名なし|
|--------|----------|-----------|------|--|
|1|2018/11/01|1|3000|3300|
|2|2018/10/01|3|5000|5500|
|3|2018/10/01|4|6000|6600|
|4|2018/11/02|2|2000|2200|
|5|2018/11/15|2|NULL|NULL|

### 5. シーケンス

serial型を使って、以下のテーブルを作成してください。

テーブル名：users

|カラム名|型|制約|説明|
|--------|--|----|----|
|id|SERIAL|PRIMARY KEY|主キー|
|name|VARCHAR(50)| |名前|

作成されたシーケンスのオブジェクトを確認し、usersテーブルへレコード作成時にidが101から連番になるようにシーケンスの更新してください。

※シーケンスの確認方法、更新方法などはインターネットを使って調査してください。
