# 変数と型

---

## 変数とは

変数という言葉は数学で使われます。

* y = 3
* y = 2x + 3

数学での変数は「値が変化するもの」とされています。
プログラムでは「値を一時的に入れておくことができるもの」を変数と呼びます。
一度変数に値を入れてしまえば、プログラム上でその値を繰り返し表示したり、計算に利用したりできます。
また計算途中の値を一時的に格納しておく場所のような使い方をすることもできます。

プログラムの世界の変数として箱をイメージします。

![picture 1](/images/609373b4da260334530206e9031a4237defca6bb7e119c44933e002a0b4939fd.png)  

---

まず、この箱に対してできることを3つ紹介します。

### 1. 宣言

1つ目は、新しい箱を用意し「名前を付ける」ことができます。
これを宣言といいます。

![picture 2](/images/504bfa5696e25b277ba9ba70ec423f6622e43fec3f4c9c609b0b5b994b0a3bd2.png)  

---

### 2. 代入

2つ目は、箱に「値を入れる」ことができます。
これを代入といいます。

![picture 3](/images/c4bd45d4e0ccaa59b975a9f9cbe47c0bc4bab1749d80a8551d0cd36c2a5f9992.png)  

---

### 3. 参照

3つ目は、箱の中に入っている「値を見る」ことができます。
これを参照といいます。

![picture 4](/images/b78b87a69079953ef31c65a4abb910d03a0b51de1914d66a276179483a147006.png)  

---

## 型

また、箱にはさまざまな形（型）があります。
数字が入る箱もあれば、文字列が入る箱もあります。
新しく箱を用意する（宣言する）際には、箱の形、つまり型も一緒に宣言する必要があります。

![picture 5](/images/75cf5eae34d30f6a6f02757d218fb63c78fc55fba449415d7756cbf3a3e4643a.png)  

---

## 命名規則

Javaでは変数に付けられる名前にルールがあります。
変数の宣言をする（名前を付ける）ときには、このルールを必ず守る必要があります。

1. 「_（アンダースコア）」「$」以外の記号は使えない
2. 先頭に数字は使えない
3. 予約語は使えない

---

**1.「_（アンダースコア）」「$」以外の記号は使えない**

変数の宣言をする（名前を付ける）ときに「!」や「%」などの記号を名前に使うことはできません。

例）  
exclamation_mark!!!
  ⇒　×（「!」が使われているから）  
under_score  
  ⇒　○（「_（アンダースコア）」は問題ない）  

---

**2.先頭に数字は使えません**

変数の宣言をする（名前を付ける）ときに名前の先頭に数字を使うことはできません。

例）  
1000yen  
  ⇒　×（先頭が数字だから）  
ipv6  
  ⇒　○（先頭が数字ではないから）  

---

**3. 予約語は使えません**

変数の宣言をする（名前を付ける）ときに予約語を使うことはできません。
予約語とは、何かしらの意味を持つ単語として最初から登録されている単語です。
「public」や「static」、「class」などが該当し、変数の宣言をする（名前を付ける）ときに使用することはできません。

例）
class  
  ⇒　×（classは予約語です）  
class3  
  ⇒　○（class3は予約語ではない、他の条件もクリア）  
Class  
  ⇒　○（Classは予約語ではない）  

Javaでは大文字と小文字は別の文字として識別するため、最後のClassも問題ありません。

---

## Javaプログラマの習慣

変数の宣言をする（名前を付ける）ときに、名前のルールは先ほどの通りですが、Javaのプログラマには以下のようなマナー（慣習）があります。

1. 変数の名前の先頭は小文字
2. 中身がイメージできる名前を付ける
3. 英単語の区切りごとに大文字で表記する

---

**1.変数の名前の先頭は小文字**

宣言する（名前を付ける）ときに、変数名の1文字目は小文字にします。

例）  
dog、cat  

---

**2. 中身がイメージできる名前を付ける**

変数の宣言をする（名前を付ける）ときに中に何が（どのような値が）入るのか、すぐに分かるような名前を付けます。

例）  
name、age  

例のような変数名であれば、nameは「名前」、ageは「年齢」が入ることが分かります。

---

**3. 英単語の区切りごとに大文字で表記する**

変数の宣言をする（名前を付ける）ときに、英単語の区切りは大文字で表記します。この書き方はキャメルケース（Camel Case）と呼ばれています。

例）  
lunchSet、userName  

このように書くことで単語の区切りを視覚的に分かりやすくしています。

Javaのルールではありませんが、Javaのプログラマの慣習です
プログラミング言語ごとに慣習は異なります。

---

## 変数の利用

以下のプログラムを確認してください。

variable.jsp

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>変数と型</title>
</head>
<body>
  <%
    int month;    // (1) 宣言
    month = 4;    // (2) 代入
    out.println(month);  // (3) 参照
  %>
</body>
</html>
```

---

実行結果

```text
4
```

### 解説

* (1) 宣言
  * monthという名前の変数を用意しています。
  * intは整数が入る変数であることを示しています。
* (2) 代入
  * 変数に4という値を代入しています。
* (3) 参照
  * monthという変数の値を出力しています。
  * 計算に利用することもできます。

---

## 変数を利用するときの注意点

変数を扱う場合に、気をつけなければならないことがいくつかあります。

1. 同じ名前の変数を宣言することはできない
2. 変数を宣言する前に代入することはできない
3. 代入する前の変数を参照することはできない

---

**1.同じ名前の変数を宣言することはできない**

変数を複数宣言する際に、変数の名前が被っていてはいけません。それぞれ異なる名前を付けてください。
同じ名前の変数があると区別ができなくなるからです。

```java
int month;
int month;  // 同じ名前なのでエラー

month = 4;

out.println(month);
```

---

**2.変数を宣言する前に代入することはできない**

以下は変数の宣言をコメントアウトしたものです。
Javaでは変数を宣言なしに使用することはできません。

```java
// int month;

month = 4;  // 宣言されていない変数への代入はエラー

out.println(month);
```

---

**3.代入する前の変数を参照することはできない**

以下は変数への代入をコメントアウトしたものです。
Javaでは一度も代入をしていない変数を参照することはできません。

```java
int month;

// month = 4;

out.println(month); // 代入していない変数の参照はエラー
```

それぞれ、実際に試して、エラーメッセージを確認してください。

---

## 初期化と再代入

変数の使い方のまとめとして、宣言と代入を組み合わせた書き方を行います。
宣言と代入を組み合わせたものを**初期化**といいます。
また、一度代入を行った変数に、再度代入を行うことを**再代入**といいます。

変数の初期化を行うプログラムを確認します。

変数の宣言と代入を一度コメントアウトし、新たに初期化を行うコードを追加してください。
(1)が初期化を行うコードです。

```java
// int month;
// month = 4;

int month = 4; // (1) 初期化

out.println(month);
```

結果

```text
4
```

---

結果は変わりませんが、問題なく動作します。
この初期化の構文は、変数の宣言と代入をまとめた形です。

続いて、変数の再代入を行うプログラムを確認します。

先ほどの初期化のコードに再代入を行うコードを追加して、実行結果を確認してください。
(2)が再代入を行うコードです。

```java
// int month;
// month = 4;

int month = 4;

month = 5;  // (2) 再代入

out.println(month);
```

結果

```text
5
```

---

このプログラムを実行すると、

1. 変数monthを4で初期化（変数monthを宣言して4を代入）
1. monthに5を代入（再代入）
1. monthを参照して出力

という一連の処理が実行されるため、実行結果として5が出力されることになります。

実際に箱のイメージ図を使って流れを確認します。

```java
int month = 4;  // (1) 初期化

month = 5;  // (2) 再代入

out.println(month);
```

---

(1)初期化  
monthという名前の箱を用意し、4を入れています（初期化）

![picture 6](/images/abcc689bfaf600e7ba9da9b2b90c37ef94721adf25ba19f860b5c9a5ec4c5eeb.png)  

---

(2)再代入  
そこへ、 5を再代入した場合…

![picture 7](/images/6ceb8d61cd600a0839a949f796bc9a608a135f77030b8c7b9b98f282f96d6317.png)  

---

5が箱に入り、4は無くなります(上書きされます)。

![picture 8](/images/d57e2959cf94450bb01b26e7b0f3828532426d495637f2bdcd21cc467ba46749.png)  

---

## 変数の使い方のまとめ

* 同じ名前の変数は一度しか宣言できない
  * 初期化は宣言も含んでいます
  * 違う名前の変数であれば問題ありません
* 代入は何度でもできます
  * ただし再代入すると、前の値は上書きされます
* 参照は何度でもできます
  * 変数は何度でも出力や計算などに使用できます

---

## JSP式

サンプルプログラム（variable2.jsp）を確認してください。

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>変数と型</title>
</head>
<body>
  <%
    int month;
    month = 4;
  %>
  
  <%= month %> <%-- out.print(month) に変換される --%>
</body>
</html>
```

JSPには以下のようなJSP式と呼ばれる記述をできます。
このJSP式はout.print()を簡略化した記法として利用できます。
また、 <%-- --%>はJSPで使用できるコメントです。
このJSP式を利用することで、変数の値の出力が複数個所になったとしても、可読性を損なうことなく記述できます。

---

※補足

```html
<%-- --%> と <!-- --> 
```

の違い。
前者はコンパイル時に消える、後者はHTMLのソースには残る）

---

## 講義動画

[変数と型](https://youtu.be/nqrANb5U8Uc)
