# Web技術基礎

---

# ネットワーク

---

### ネットワーク

コンピューターのネットワークというのは､複数のコンピューターを繋ぎ合わせて､お互いに情報をやりとりできるようにした仕組みです｡
例えば､2台のパソコンをケーブルで接続し､ファイルを共有できるようにすればネットワークといえます｡

### LAN（Local Area Network）

企業内や部署内など、比較的狭いエリアでネットワークを構築したものをLAN（構内ネットワーク）といいます。
ファイルやデータベースなどのデータを共有したり、ハードディスクやプリンターなどを共有したりするには、LANの構築が欠かせません。

### WAN（Wide Area Network）

地理的に離れた場所でやりとりするネットワークで、異なる拠点間のLANを接続したネットワークです｡

### インターネット

共通の通信仕様を用いて全世界の膨大な数のコンピュータや通信機器を相互に繋いだ、巨大なコンピュータネットワークで、WANの1つです。

インターネットでは、電子メールやWebといった日常でもおなじみになったサービスを利用することができます。大勢の人に同時にメールを送信したり、
世界中に存在するWebページから情報を検索したりすることができます。

---

### ISP

Internet Services Providerの略でインターネット接続業者のことをいいます。一般的な呼び名ではプロバイダと呼ばれます。
電話回線やISDN回線、ADSL回線、光ファイバー回線、データ通信専用回線などを通じて、企業や一般家庭のコンピューターをインターネットに接続します。
ISPでは付加サービスとして、メールアドレスやホームページ開設用のディスクスペースを貸し出したり、オリジナルのコンテンツを提供したりしている業者などがあります。

### ISPの役割

インターネットに接続するにはまずISPと契約して接続しなければなりません。
一度ISPに接続すればインターネットに接続された世界中のネットワークと通信を行うことができます。
契約したISPはさらに他のISPと相互接続することで通信可能な範囲を広げ、世界中のネットワークと繋がっています。
ユーザーの立場から見るとISPはまさにインターネットへの入り口です。

---

# プロトコル

---

### プロトコル
通信を行う際には送信側と受信側において、手順やデータ形式についての規約を守ることが必要になります。この規約を、**プロトコル**といいます。国際標準化機構（ISO）ではOSI参照モデルとして標準化しています。
OSI参照モデルは7階層に分かれており、各プロトコルは7階層のいずれか、又は複数に対応するように考案されてます。7階層に対応することで、別のプロトコルと組み合わせを容易にしています。
このモデルに準拠して通信機器やソフトを開発すれば、異機種間でも接続し、通信することができます。

### OSI参照モデル

|階層|意味|
|:--|:--|
|第7層: アプリケーション層|アプリケーション間でのデータのやり取りを担当｡|
|第6層: プレゼンテーション層|データ変換 （ASCII・EBCDIC などの相互変換） と圧縮を規定する｡|
|第5層: セッション層|ログイン・ログアウトなどのセッションの手順を規定する｡|
|第4層: トランスポート層|再送・輻輳処理・ピア間の信頼性のあるエンドツーエンドの通信を担当｡|
|第3層: ネットワーク層|ネットワークの経路選択・中継作業を担当｡|
|第2層: データリンク層|一つのネットワークに接続された複数のコンピューター間でのデータ伝送を担当｡隣接機器と通信するために使用され、イーサネットの技術が多く使われている。|
|第1層: 物理層|回線に送信する電気的な変換やピンの形状・ケーブル特性などを規定する｡|

---

### TCP/IP
インターネットで使用されるプロトコルです。
TCPとIPという個別のプロトコルも存在しますが、複数のプロトコルの集まりを指してTCP/IPと呼ぶことが一般的で、特にTCP/IP プロトコルスイートと呼ぶこともあります。
TCP/IPのさまざまなプロトコルは、基本的にはOSI参照モデルに当てはめることができます。
各プロトコルがOSI参照モデルのどの層に該当するかが分かれば、そのプロトコルが何をするためのものなのか見当がつきます。

OSI参照モデルとTCP/IPの対応

|OSI参照モデル|TCP/IP|主なプロトコル|
|:--|:--|:--|
|第7層: アプリケーション層|アプリケーション層|HTTP, FTP, TELNET, SMTP, POP3, etc|
|第6層: プレゼンテーション層|アプリケーション層||
|第5層: セッション層|アプリケーション層||
|第4層: トランスポート層|トランスポート層|TCP, UDP|
|第3層: ネットワーク層|インターネット層|IP|
|第2層: データリンク層|ネットワークインターネット層|イーサネット,PPP,PPPoE|
|第1層: 物理層|ネットワークインターネット層||

---

### 第1層の機器

物理層で動作する機器としてリピーターとリピーターハブがあります。
主にネットワークの延長目的で使用されます。

* リピーター
  * 信号の波形を直し、ネットワークを延長する機器
  * 信号内容の意味を調べて動作するのではなく、単純に信号の波形を直す役割のみを持つ
  * LANの伝送距離を延長するために、減衰した信号を増幅・再生して中継する
* リピーターハブ
  * リピーターと同様の機能を持つ
  * リピーターと違い、集線装置の機能である複数のポートを持っており、複数のコンピューターと接続できる
  * リピーターハブ同士を接続することもでき、これをカスケード接続と呼ぶ

ただし、リピーターハブは宛先を理解してデータを送信できるわけではないため、繋がれている全ての端末に信号を送ってしまう欠点があります。

---

### 第2層の機器

データリンク層で動作する機器としてブリッジとスイッチがあります。
ネットワークを拡張する際のリピーターハブの欠点を解消しています。

* ブリッジ
  * MACアドレスを調べてデータの中継を行う機器
  * 信号の内容を解釈して（宛先MACアドレスを読み取って）関係する端末に対してのみ信号の中継を行うことが可能
  * 無用な信号が流れるのを減らしネットワークの有効活用が可能
* スイッチ
  * ブリッジと同様の機能を持つ
  * ブリッジとの違いは中継処理が異なり、ブリッジはソフトウェアで処理していたのに対してスイッチはASICという専用のハードウェアで処理を行う
  * スイッチングハブ、L2スイッチ、マネージドスイッチ、インテリジェントスイッチなどメーカーにより様々な呼び方がある

---

### 第3層の機器

ネットワーク層で動作する機器としてルーターやL3スイッチがあります。
異なるネットワーク間でデータを転送するための機器です。パケットのIPアドレスを調べて、宛先のネットワークにデータを流すルーティングを主な役割としています。

* ルーター
  * 異なるネットワーク（データリンク）を相互接続するためにパケットの中継を行う機器
  * イーサネットとイーサネットはもちろん、イーサネットとFDDIのように異なるデータリンクも接続することが可能
  * 現在はネットワークのゲートウェイという位置づけも担っており、アドレス変換やセキュリティ機能などさまざまな機能を持つ

---

### トランスポート層の役割

ネットワーク層がIPアドレスによるパケット到達などを管理するレイヤーだったのに対し、トランスポート層はデータ転送を制御するレイヤーです。データ転送の際の誤りや再送の要求などを行います。
TCP/IPでは以下の二つのプロトコルが使用されます。

* TCP
  * コネクション指向で、信頼性のあるストリーム型のプロトコル
  * 順序制御、再送制御、フロー制御、輻輳制御など多くの機能を持つ
* UDP
  * 信頼性のないデータグラム型のプロトコル
  * TCPが持っているさまざまな機能を持たない代わりに高速性やリアルタイム性に優れる

---

### ポート番号

TCP/IPネットワークでは、IPアドレスによって通信相手のホスト（端末）を特定することができます。
しかし、1台のホスト上には複数の通信サービス（アプリケーション）が動作していることがよくあります。
アプリケーションを識別する番号がポート番号です。
ポート番号は0～65535番までの番号が付けられており、そのいずれかの番号を使用し通信が行われます。

主なポート番号

|ポート番号|プロトコル|用途|
|--:|:--|:--|
|20|ftp-data|ファイル転送(データ本体)|
|21|ftp|ファイル転送(コントロール)|
|22|ssh|リモートログイン(セキュア)|
|23|telnet|リモートログイン|
|25|smtp|メール送信|
|53|domain|DNS(名前解決)|
|80|http|www|
|110|pop3|メール受信|
|123|ntp|時刻合わせ|
|143|imap|メール受信(IMAP)|
|443|https|www(セキュア)|

---

### ポート番号の大別
ポート番号は大きく分けると三種類に区分されます。
基本的にポート番号の設定は自由ですが、0～1023番は最初から使用する用途が決められているため、勝手に使用してはいけません。

|ポート番号|名称|説明|
|--:|:--|:--|
|0~1023|ウェルノウンポート|最初から特定のアプリケーションが予約されている|
|1024~49151|登録ポート|アプリケーションによって割り当てられている|
|49152~65535|ダイナミックポート|自由に使える|

---

# IPアドレス

---

### IPアドレス

IPアドレスはInternet Protocolアドレスの略で、ネットワーク上のコンピュータを一意に特定するための数値です。
Webや電子メールなど、インターネット上のサービスを利用するためには、数値で構成されたIPアドレスが必要です。
インターネット上でホストを識別する住所のような役割をもちます。

---

### IPv4とIPv6

IPアドレスにはIPv4(version 4)とIPv6(version 6)の2つのバージョンがあります。
歴史的にはIPv4の方が古く、IPv6が後に登場しました。
IPv4とIPv6にはいくつかの違いがありますが、大きな違いは扱える数値の数です。

IPv4のIPアドレスは32ビットで表現され、約43億の数値が扱えます。
しかし、パソコンの普及、携帯電話の普及、IoTの発展などによりインターネットに接続される機器は年々増え、43億では到底足りない状況です。
このIPアドレスが不足する問題をIPアドレス枯渇問題と呼びます。

IPv6は、IPアドレス枯渇問題を解決するための新しい技術として登場しましたが、IPv4のアドレスを効率よく使うための技術が発達に伴い、現在でもIPv4が多く使用されています。

これ以降のテキストでは特に断りがない限り、IPアドレスとはIPv4のIPアドレスのことを指します。

---

### IPv4でのIPアドレス

IPv4でのIPアドレスは32ビットの数値です。
ただし0と1が32桁並ぶのは人間には理解しづらいため、通常8ビットずつ区切り10進数で表記します。

00001010 10100000 00100010 00000011  

↓8bitずつ10進数に

10.160.34.3  

### グローバルIPアドレスとプライベートIPアドレス

IPアドレスは2つの種類があります。
それはグローバルIPアドレスとプライベートIPアドレスです。

グローバルIPアドレスはインターネットに接続するためのIPアドレスで、プライベートIPアドレスは同じ建物やフロア内（LAN内）でのみ有効なIPアドレスです。

先述したIPアドレス枯渇問題を解決するための仕組みとして考えられた仕組みです。

---

### プライベートIPアドレスの範囲
閉じたネットワークであるLANでは、重複しなければ基本的に自由にIPアドレスを割り当てることができます。しかし、インターネットで使用されているアドレスと重複しない方が都合がよい（例NAPTによるアドレス変換、等）ため、あらかじめ利用できるアドレスの範囲が決められています。

|アドレス範囲|アドレス数|
|:--|:--|
|10.0.0.0~10.255.255.255|1677万7216アドレス|
|172.16.0.0~172.31.255.255|104万8576アドレス|
|192.168.0.0~192.169.255.255|6万5536アドレス|

---

IPアドレスは二つの部分から構成されていて、前半をネットワーク部、後半をホスト部といいます。

* ネットワーク部
  * ネットワークの世界における一つのネットワークを識別する部分です。
複数のIPアドレスが同じネットワークに属するかどうかは、このネットワーク部が一致するかしないかで判断できます。
* ホスト部
  * あるネットワークの中で、ホストを識別する部分です。
ネットワーク内で重複しないようにホストごとに割り当てられます。

![picture 11](/images/97d4a397b15e1e6aff8fc0469566149a571dd3b61a7d4dc6b17c547701b6cacf.png)  

---

### サブネットマスク
IPアドレスは「ネットワーク部」と「ホスト部」に分かれます。
その境を示すためのアドレスがサブネットマスクです。
2進表記のサブネットマスクは、上位から1が続き、いったん0に変わるとその後はすべて0が続くようなアドレスになっています。
この0と1の境目が、ネットワーク部とホスト部の境目を示します。

＜例＞
IPアドレス：192.168.0.10
サブネットマスク：255.255.252.0

![picture 12](/images/813f012e6ec149f2a02bc78939f7cccd2a51716ef20255995b649327c745687c.png)  

### プレフィックス表記

プレフィックス表記とは、IPアドレスとサブネットマスクをまとめて表記する方法です。
「192.168.0.10/22」のように「IPアドレス/サブネットマスクの1の数」で表記します。
上記の場合、サブネットマスクは上位から1が22個並ぶという意味になり、
サブネットマスクは2進数だと「11111111 11111111 11111100 00000000」となります。
10進数に変換すると、「255.255.252.0」です。

---

### サブネットによる分割

サブネットマスクを使用することで、ネットワークの管理単位をより小さい単位に分割することができます｡
これをサブネット化といいます｡
大きな組織などが広大なIPアドレス空間を単一のネットワークとして運用すると、DHCPなどにより発生するブロードキャスト（一斉配信）通信がすべての端末へ届いてしまい、通信効率が低下しやすくなります。
サブネット化をすることで、通信効率の低下を抑えることができます。

![picture 13](/images/8bda7d2b2a9eb44858cac419f664bad68c3443a2698a9b50d7d1c34a79410c93.png)  

---

### 特殊なアドレス

IPアドレスは各ネットワーク内でホストごとに一意となるように振る必要があります。重複した場合正しく通信をすることができません。また、以下の二つのIPアドレスは予約済みとなっており、ホストに割り当てることができません。

* ネットワークアドレス
  * ネットワークそのものを指すアドレス
  * ホスト部が全て0のアドレス

* ブロードキャストアドレス
  * ネットワーク内の全てのホストに対してデータを送信するためのアドレス
  * ホスト部が全て1のアドレス

---

### DHCP（Dynamic Host Configuration Protocol）

LANに接続するには、PCにIPアドレスを設定している必要があります。
IPアドレスは手動で設定することもできますが、IPアドレスの付与や取得、PCへの動的な割当を行うプロトコルとしてDHCPというものがあります。

LANに対してIPアドレスの設定を行っていないPCが接続された場合、DHCPサーバーが動的にIPアドレスの付与を行うことで、PCは他のPCやサーバーとLAN上でやり取りすることが可能となります。
なお、DHCPによって、PCに対してローカルIPアドレスを動的に割り当てることをリース（Lease）と呼びます。

### DHCPによるIPアドレスの割当

LAN内に接続するPCは、手動でIPアドレスを設定することもできます。しかしこの場合、設定する手間がかかったり、他のPCとIPアドレスが重複してしまうと、ネットワーク全体に影響を及ぼしてしまうというリスクも否めません。
そこでLAN内にDHCPサーバーを設置、運用することが一般的になっています。
これは、家庭内LANなど小規模なLANでも例外ではありません。現在の家庭内LANの多くは、ブロードバンドルーター（Broadband Router）によってインターネットに接続していますが、このブロードバンドルーター内でDHCPサーバーが機能しています。

---

### IPアドレスの変換

同じ建物内などで使用する際は「プライベートIPアドレス」を使いますが、インターネットを使用する際には、「グローバルIPアドレス」を必要があります。

封筒の住所に「総務部田中様」とだけ書いて郵便ポストに入れても、当然配達されません。
ポストに入れる前に、誰かが「東京都中央区日本橋本町3-8-4 第二東硝ビル2階」という宛名に必要情報を補い、「東京都中央区日本橋本町3-8-4 第二東硝ビル2階総務部田中様」という宛名に書き換える、つまり変換しなくてはいけません。
ネットワーク上では、中継ルーターがこの変換の役割を担い、グローバルIPアドレスとプライベートIPアドレスを相互に変換する仕組みを持っています。
これを「アドレス変換：NAT（Network Address Translation）」といいます。

---

### NATとNAPT

NATは、グローバルIPアドレスとプライベートIPアドレスを相互に変換しますが、一つのグローバルIPアドレスに対し、一つのプライベートIPアドレスしか変換できません。
つまり、同じLANの中で、複数の機器が同時にインターネットへ接続をしようとした場合、NATでは対応できません。
そこで、一つのグローバルIPアドレスを、複数の機器で共有する技術、NAPT（Network Address Port Translation）が使用されています。
NAPTは、IPアドレスに加え、ポート番号もセットにして変換することで、一つの
グローバルIPアドレスに対し、複数のプライベートIPアドレスを紐付けることができます。
なお、 NAPTと同じ意味で、「IPマスカレード」という言葉が使われることがあります。また、NAPTのことを単にNATということもあります。文脈によってどちらを指すのか判断することが必要です。

![picture 14](/images/580f6eeb87eb6d2bfd42ffd6eef4b2d1797e35c48ad3e83fb4959427fa9a8683.png)  

---

# サーバーとクライアント

---

### サーバーとクライアント
インターネットなどのネットワークにつながっているコンピュータは、何かしらのサービスを提供するサーバーと、そのサーバーが提供するサービスを受け取るクライアントに分かれます。
クライアントはサーバーに対して要求（リクエスト）を送り、サーバーは送られてきたリクエストに対して応答（レスポンス）を返します。

![picture 15](/images/9ed21fc7fbc5ebc2ad571c2e65c6c529b790247502c6894bfbfd03e7863ea491.png)  

クライアントやサーバーが具体的に何になるかは利用するサービスによって異なります。
例えば、メールの場合クライアントはメーラー（OutLookなど）、サーバーはメールサーバー（Postfixなど）になります。
Webの場合、クライアントはWebブラウザ、サーバーはWebサーバーになります。
サーバーという言葉はハードウェアのことを指すこともありますが、上記のようなサーバーソフトウェアのことを指すこともあります。
一般的なPCもサーバーソフトウェアをインストールすればサーバーとして機能させることも可能です。
ただし、インターネット上のサービスは基本的には常時稼動させるため、高い安定性や保守性を維持することが要求されます。
そのため、商用のWebサイトの運用などに際しては、サーバー専用に設計されたサーバーコンピューターが用いられています。

---

### Webブラウザ

WebにおけるクライアントはWebブラウザといいます。
単にブラウザとも呼ばれます。
WebブラウザはWebページを閲覧するためのソフトウェアで、HTMLやCSS、JavaScriptなどで記述されたソースコードを人間の見た目に分かりやすいように整えて表示してくれる機能を持ちます。

Webブラウザには

* Google Chrome
* Microsoft Edge
* Internet Explorer
* Safari

などがあります。

---

### Webサーバー

Webサーバーとは、 Webブラウザー（クライアント）からの要求（リクエスト）に応じて、HTML文書などの情報を送り返す（レスポンス）システムのことです。
レスポンスされる情報はHTMLの他に、CSSやJavaScript、画像ファイルなども含まれ、一般に資源（リソース）と呼ばれます。
WebサーバーはHTTPという通信プロトコルを用いて情報のやり取りをします。

サーバーソフトウェアの代表的な製品には

* オープンソースソフトウェアのApache（Apache HTTP Server）
* Nginx（エンジンエックス）
* MicrosoftのIIS（Internet Information Service）

などがあります。

---

# WebサイトとWebアプリケーション

---

### Webページ・Webサイト・ホームページ

Webサーバーには、HTML・CSS・JavaScriptなどを使って作成されたファイル群が配置されており、それらをWebブラウザを用いて閲覧することができます。
Webブラウザで見ることができる、HTMLなどで作成されているページをWebページと呼びます。

複数のWebページが集まって構成されているものをWebサイトと呼びます。

一般には「ホームページ＝Webサイト」と認識されていますが、厳密にはホームページとはWebブラウザを起動したときに表示されるWebページ、あるいはWebサイトのトップページのことを指します。

---

### 静的Webサイトと動的Webサイト

Webサイトには静的Webサイトと動的Webサイトがあります。
静的Webサイトとは、主にHTMLやCSSなどを用いて構成されたWebサイトで、誰がいつアクセスしても同じ内容のWebページが表示されるWebサイトのことです。

一方で、クライアントによって表示される内容が変わったり、アクセスした時の状況に応じて表示内容が変わるようなWebサイトのことを動的Webサイトと呼びます。
動的WebサイトはWebアプリケーションとも呼ばれます。

---

### Webアプリケーション

（静的）Webサイトをネットワーク（インターネット）上で公開するためにはWebサーバーが必要になりますが、Webアプリケーション（動的Webサイト）を公開するためには、Webサーバーの他にアプリケーションサーバー（APサーバーと呼ばれます）が必要になります。

APサーバー上でプログラムを動作させ、プログラムによって動的にHTMLなどのファイルを作成することによって、クライアントごとに異なるWebページを表示さることが可能になります。

---

### ネイティブアプリケーション

Webアプリケーションではない、コンピュータに直接インストールして起動させるようなアプリ（WordやExcelなど）は、ネイティブアプリと呼ばれます。
PCの場合はデスクトップアプリとも呼ばれます。

デスクトップアプリは各コンピュータにインストールが必要で、各PC上で動作します。
そのため、処理速度はインストールされたPCの性能に依存します。

また、アプリケーションのバージョンアップが必要になった場合には、自分でバージョンアップの操作を行う必要があります。

---

### Webアプリケーションの特徴

Webアプリケーションでは、アプリケーションに関する処理はサーバー側で行います。
そのため、利用者側はWebブラウザで結果を受け取る処理のみ行えばよいことになります。
また、アプリケーションのバージョンアップもサーバー側で行われるため、利用者はバージョンアップの処理をする必要がありません。

ネイティブアプリケーションと比較すると、

* 利用者側のPCの性能に依存しない
* バージョンアップの手間がない

などのメリットがあります。
一方で、

* インターネットに接続しないと使えない
* セキュリティ上のリスクが高い

などのデメリットもあります。

---

# URLとDNS

---

### URLとは

Webサイトを閲覧するときは、どのサーバーのどのコンテンツを閲覧するかを一意に特定できる必要があります。
その参照先を閲覧するための仕組みがURL（Uniform Resource Locator）です。
URLによって、リソースが存在する場所を一意に特定することができます。

Webブラウザの上部に表示されている、一般にhttp、またはhttpsから始まる文字列がURLです。

---

### URLの構成

URLは一般に以下のような構成になります。

* 全体
  * http://www.example.co.jp/courese_java_base.html
* スキーム名
  * http://
* ホスト名
  * www.example.co.jp
* パス(ファイル名)
  * courese_java_base.html

スキーム名、ホスト名、ファイルへのパス名で構成されます。
スキーム名は通信プロトコルを表す識別子で、Webでは通常httpまたはhttpsが使用されます。ホスト名は、Webサーバー名です。
パス名(ファイル名)は、サーバー内のファイルの位置などを表します。

---

### URL・URI・URN

URLに似た用語でURIとURNがあります。
URI（Uniform Resource Identifier）はリソースを一意に特定するための識別子を表すもので、URN（Uniform Resource Name）はリソースの名前を表すものです。

URLとURNは元々URIの一部で、URL（リソースの場所）とURN（リソースの名前）を合わせることでリソースを一意に特定する仕組みとされていました。
この仕組みにより、仮にURL（場所）が変更されたとしても、URNがあることでURIを変更することなくリソースにアクセスできるメリットがありました。

しかし実際にはURLは一度決まるとその後めったに変更されることがなく、実質
URL=URIとなっているのが現状です。

---

### DNS（Domain Name System）

インターネット上のコンピューターを一意に特定するためには、IPアドレスが必要になります。
そのため、URLを使ってリソースを一意に特定するためにはIPアドレスの情報も必要になります。
しかし、IPアドレスは「123.45.67.89」といった数値の羅列になっており、人間が識別・記憶するのは非常に困難です。
そこで、人間が利用し易いように「example.co.jp」といった文字列からなるドメイン名が利用されています。
ドメイン名を使ってインターネット上でやりとりを行うためには、これをコンピューター同士が通信するために必要なIPアドレスに変換（名前解決）しなければなりません。
このドメイン名とIPアドレスを対応づけるしくみがドメインネームシステム（DNS）です。

---

### ドメイン名

手紙を送る時に相手の住所が必要であるのと同様に、インターネットでは、Webサイトを見たりするために、相手がインターネット上のどこにいるのかを特定することが必要です。
相手の居場所を特定するために必要なのが「インターネット上の住所」であり、これをドメイン名といいます。
ドメイン名の構成
ドメイン名は、以下のように利用されます。

www.example.co.jp

![picture 16](/images/fe14be6c4290061e6367aabf05476f40ab2f5138a2bb32f8218a9f9fda765e5f.png)  

---

### FQDN（完全修飾ドメイン名）

ドメイン名自体は一意であることを保証されていますが、同一ドメイン内にあるサーバーを区別する必要があります。
例えばWebサーバーを表す「www」などがそうで、これをホスト名（サーバー名）といいます。
「www.example.co.jp」のようなサーバー名まで含めたドメイン名を完全修飾ドメイン名（FQDN、Fully Qualified Domain Name）と呼びます。
FQDNはIPアドレスと等価で、インターネット上の通信ではFQDNを変換したIPアドレス宛の通信が行われています。
このFQDN⇔IPアドレス変換を名前解決といいます。

---

### HTTPとHTTPS

HTTPとHTTPSは共にアプリケーション層における通信プロトコルで、Webの通信プロトコルです。
Webを閲覧するときに通常Webブラウザを使用します。
WebブラウザはWebサーバーと通信することでHTMLなどのリソースを取得し、Webページを閲覧することができます。
この時、WebブラウザとWebサーバーがどのソフトウェアであっても問題なく動作するのは、WebブラウザとWebサーバーがHTTPやHTTPSというプロトコルに基づいて作られているからです。

---

### HTTP

HTTP通信では、クライアントはWebブラウザ、サーバーはWebサーバー、リクエストはHTTPリクエスト、レスポンスはHTTPレスポンスになります。

![picture 17](/images/2b7a0577ef2592b5d6d13dbb790631d58e9014fc1afdb0196b5df9d02e452585.png)  

---

### HTTPリクエスト

Web上でブラウザからWebサーバーに送られるリクエストはHTTPリクエストと呼ばれるテキスト情報です。
HTTPリクエストでは以下のような情報が送られています。

```text
GET https://www.example.co.jp/ HTTP1.1
HOST: XXXXXX
Connection: keep-alive
Upgrade-Insecure-Request: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)…
Accept: text/html,application/xhtml+xml,application/ …
Referer: http://xxx.xxx.xxx
accept-encoding: gzip, deflate, br
accept-language: ja-JP,ja;q=0.9,en-US;q=0.8,en;q=0.7
```

---

### HTTPS
HTTPS(Hypertext Transfer Protocol Secure)は、HTTP通信の安全性を高めるための通信プロトコルです。
インターネット上の通信では、盗聴やデータ改ざん、なりすましなどのリスクがあります。
その対策として、暗号化などを用いてインターネット上の通信を安全に行うためのプロトコル（SSL/TSL）とHTTPを組み合わせ、Web上の通信を安全に行うプロトコルがHTTPSです。

WebブラウザのURLの隣に鍵マークがついている場合はHTTPSによる通信が行われています。

HTTPSプロトコルを使えば、暗号化された安全な通信を行うことができますが、セキュリティのリスクがなくなるわけではありません。

---

# セキュリティ

---

### データ通信時の危険性

ネットワークの利用には様々な危険が存在します。通信経路上には様々な危険が潜んでいます。

* 盗聴
  * 第三者が通信データを盗み読む危険があります。受信者にデータは届きますが、その内容を読まれてしまっているのです。
* 改ざん
  * 第三者が通信データを別のデータに書き換える危険があります。
  * 受信者は正しいデータだと思っていますが、実際には違うデータとなっています。
* なりすまし
  * 第三者が通信の当事者になりすまして、送受信する危険があります。受信者は正しい送信者だと思っていますが、実際には別の第三者が送信しているのです。

![picture 18](/images/81f588c210c5ce5a4d72abb97ab8d27419aae1eb050b76360b75a8a9542602d0.png)  

---

## 暗号化

メッセージを第三者によって読めないように変換することで、盗聴を防ぎます。

* 原文を平文、変換した文を暗号文といいます。
* 平文を暗号文に変える手続きを暗号化といいます
* 暗号文を平文に変える手続きを復号といいます。
* 暗号化や復号に使われるデータを、鍵（キー）といいます。

---

### 共通鍵暗号方式

暗号化と復号を共通の鍵を使って行う方式です。送信者は「共通の秘密鍵」で暗号化し、受信者は「共通の秘密鍵」で復号します。
暗号化鍵と復号鍵が同じ鍵のため、第三者に知られないように秘密にしておかなければなりません。
不特定多数の相手とデータのやり取りをするには不向きで、鍵の管理に注意しなければなりません。暗号化と復号の処理時間がかからないという特徴があります。

![picture 19](/images/4115d2f838cd5959598755c43c989af1b5cb413ca308d83f1de526c86e5761e1.png)  

---

### 公開鍵暗号方式

暗号化と復号を別々の鍵で行う方式です。受信者が公開鍵と秘密鍵をペアで作成しておき、公開鍵から秘密鍵を推測することが困難なものを使います。
暗号化は受信者の公開鍵で行い、復号は秘密鍵で行います。公開鍵から秘密鍵を推測するのは困難なので、秘密鍵さえ安全に保管していれば、第三者は暗号を解読することは出来ません。
公開鍵で暗号化を行うため、不特定多数の相手からデータを受け取るのに向いています。複雑な処理を行うため、暗号化と復号に処理時間がかかるという欠点があります。

![picture 20](/images/00e1b8b096f36ae12c5d736e6203358d260e89b695b2fc1cee2144741287bc12.png)  

---

### 電子署名（ディジタル署名）

公開鍵暗号方式が応用されています。なりすましやデータが改ざんされていないことを確認するための技術です。
送信者が公開鍵と秘密鍵をペアで作成し、送信者は自分の秘密鍵を使って暗号化します。
受信者は送信者の公開鍵を使って復号します。正しく復号できればデータは本人から送信され、改ざんされていないことになります。

【認証局】  
電子署名では、復号を行う公開鍵を作成した人間が、本当に送信者本人であるかどうかを確かめることは出来ません。
｢なりすまし｣が出来てしまうことになります。
これを防ぐために、公開鍵が本人のものであるかどうかを第三者が保障することが必要になります。
公開鍵の正当性を証明する第三者機関のことを認証局（CA：Certificate Authority）といいます。

![picture 21](/images/04a115aada375adab518b6e8744ffbe60df38b85717e40b53b578db7a8f737bc.png)  

---

## クラウド

クラウドとはクラウドコンピューティングの略です。
コンピュータの資源を使いたい時に必要な分だけ使うことができる仕組みのことをクラウドと呼びます。
一昔前までは、サーバー上にシステムを構築するためにはサーバー用のハードウェアを調達し、OSをインストールしてサーバー環境を構築していました。
しかし現在は、インターネット経由であらかじめ用意されたクラウドサービスを使うことで簡単にサーバーを構築したり、サービスを利用することができます。

クラウドには雲という意味がありますが、サーバーが物理的にどこにあるかを意識せずに使うことができるため、サーバーの場所が隠れているところからクラウドという名前が付きました。

---

### クラウドとオンプレミス

クラウドはインターネット経由であらかじめ決められたサービスを利用することです。
一方で自前でサーバー用のハードウェアを調達して自分たちでサービスを構築することをオンプレミスと呼びます。
クラウドを利用すれば、サーバーの調達費用を抑えられたり、自分たちでメンテナンスするコストを抑えられるため、コスト面でのメリットが大きいです。
また、登録すればすぐに利用を開始できるというメリットもあります。
しかし、デメリットとして

* サービスとして提供されている機能以外は使えない
* 社内のシステムとの連携がしにくい

などが上げられます。

---

### パブリッククラウドとプライベートクラウド

クラウドはオンプレミスに比べるとコスト面などで大きなメリットがあります。
しかし、インターネット経由で簡単にサービスが利用できるというのは便利である反面、誰でもアクセス可能という点でセキュリティ面のリスクもあります。
そこで、クラウドでありながらVPNや専用回線を使うことで自社専用のクラウドサービスとして利用する運用が可能です。
このような運用方法をプライベートクラウドと呼びます。
それに対し、プライベートクラウドではない、不特定多数の人が共有する通常のクラウドをパブリッククラウドと呼ぶことがあります。

【VPN】  
Virtual Private Networkの頭文字を取った用語。
離れた場所の間を仮想的な専用線でつないで安全なデータ通信を実現する仕組みで、仮想プライベート・ネットワークとも言います。
VPNはその機能を持つ接続ルータを使って距離の離れた拠点同士のLANをつなぐことができます。

---

### クラウドの運用

パブリッククラウド、プライベートクラウド、オンプレミスはそれぞれトレードオフの関係にあります。
クラウドはコスト面や導入スピードといった点ではメリットが大きいですが、セキュリティ面やカスタマイズ性という点ではオンプレミスの方がメリットが大きいです。
プライベートクラウドはパブリッククラウドとオンプレミスの中間に位置します。

導入するシステムの性質やコスト面などを考慮しながら適切な運用方法を選ぶことが大切です。

---

### クラウドの種類

クラウドはそのサービスの形態によっていくつかの種類に分けることができます。

* IaaS
  * Infrastructure as a Service
* PaaS
  * Platform as a Service
* SaaS
  * Software as a Service

---

### IaaS

Infrastructure as a Serviceの略でサーバーインフラを提供しているクラウドサービスのことです。
CPUの性能、メモリの性能、ストレージの性能、OSなどを選択してサーバーを構築することができます。
PaaS、SaaSに比べても自由度が高いですが、使いこなすにはネットワークやサーバーなどのインフラの知識が必要になります。

IssSのサービスの例としては

* Amazon EC2
* Microsoft Azure IaaS
* Google Compute Engine

などがあります。

---

### PaaS

Platform as a Serviceの略で、アプリケーションの開発環境や動作環境といったプラットフォームを提供してくれるクラウドサービスです。
プログラミング言語、DB、フレームワーク、ライブラリなどといった環境があらかじめ用意されています。

代表的なPaasは

* Microsoft Azure
* Google App Engine
* Cybozu kintone

などがあります。

---

### SaaS

Software as a Serviceの略で、あらかじめ作成されたソフトウェアを使用するタイプのクラウドサービスです。

SaaSの例としては

* Microsoft Office365
* G-Suite
* Salesforce.com

などがあります。

---

### クラウド事業者

現在世界中で利用されている主なクラウド事業者は

* Amazon (AWS)
* Microsoft (Microsoft Azure)
* Google (Google Cloud)
* IBM (IBM Cloud)

などがあります。

国内企業だと

* 富士通グループ（FUJITSU Cloud Service）
* NTTコミュニケーションズ（Enterprise Cloud）
* KDDI（KDDI クラウドプラットフォームサービス）
* さくらインターネット（さくらのクラウド）

などがあります。

---

# 仮想化とコンテナ

---

### 仮想化とは

一昔前まで、1台のサーバー（ハードウェア）に1つのサーバーOSをインストールするのが一般的でした。
しかし、それではサーバーのリソースを有効活用することができません。
1台のサーバーで複数のOSを動かして、サーバーのリソースを有効活用するための技術が仮想化です。

### 仮想化の分類

仮想化は仮想化用のソフトウェアを使って実現します。
仮想化は大きく分けて2つに分類できます。

* ハイパーバイザー型
* ホストOS型

の2つです。

仮想化ソフトの上で動作するOSのことをゲストOS、あるいは仮想マシン（Virtual Machine）などと呼びます。

---

### ハイパーバイザー型

ハイパーバイザー型はハードウェアに仮想化ソフトをインストールし、その上にゲストOSを稼働させる方法です。
ハイパーバイザー型の仮想化ソフトにはVMware vSphereやMicrosoft社のHyper-V
などがあります。ハードウェアのリソースを有効に活用できるのに加え、バックアップが容易であったり、ハードウェアに障害があったとしても、同じ仮想化ソフトが動作している他のハードウェアに容易に移動できるなどのメリットがあります。

![picture 22](/images/58b5b220682502d9564e5ff06ff8b6762417471e493e87154522fd87652e05d3.png)  

---

### ホストOS型

ホストOS型は、ハードウェア上のホストOS上に仮想化ソフトをインストールし、そのうえでゲストOSを動作させます。
ホストOS型の仮想化ソフトにはVMware Workstationや、Oracle社のVirtual Boxなどがあります。
仮想マシンのファイルをコピーするだけで同じ環境を作れるため、開発環境を作成する場合などに便利です。

![picture 23](/images/be660537c3a6e97c098f1bd218d2fb0394667b69b227ee145c5212057b0bb1f1.png)  

---

### クラウドと仮想化とコンテナ

仮想化（特にハイパーバイザー型）の技術はクラウドのIaaSで使用されています。
オンプレミスによる運用でもハイパーバイザー型の仮想が使用されることがあります。
ホストOS型はサーバーの運用ではあまり使用されません。
システム開発の際に開発環境として使用される場合が多いです。

コンテナはクラウドのPaaSの提供で使用されており、開発環境やシステムの運用環境を構築する際にも使用されます。
